function getFormItemCall(a,b){if(0==b.rows.length&&isOffline())Page.redirect("forms.html");else if(0!=b.rows.length||isOffline()){for(var c=[],d=0;d<b.rows.length;d++)c.push({id:b.rows.item(d).id,data:'<a href="form_view2.html?id='+b.rows.item(d).id+'" data-transition="slide"><i class="fa fa-edit"></i> '+b.rows.item(d).label+"</a>"});_append("#form_item_data",c)}else{var c={client:User.client,token:User.lastToken,category:get.type};Page.apiCall("formDeviationStart",c,"get","formItemData")}}function getFormItem(a){a.executeSql('SELECT * FROM "form_item" WHERE "type"=?',[get.type],getFormItemCall)}function form_viewInit(){if(User.isLogged()){get=Page.get();var a=db.getDbInstance();a.transaction(getFormItem,db.dbErrorHandle)}else Page.redirect("login.html")}function formItemData(a){if(console.log(a),a.success){var b=a.form_list_question,a=[],c=[];for(var d in b)b.hasOwnProperty(d)&&(a.push({id:d,data:'<a href="form_view2.html?id='+b[d].info.id+'" data-transition="slide"><i class="fa fa-edit"></i> '+b[d].info.label+"</a>"}),c.push([b[d].info.id,b[d].info.label,JSON.stringify(b[d].form),get.type]));db.lazyQuery({sql:'INSERT INTO "form_item"("id", "label", "form", "type") VALUES(?,?,?,?)',data:c},0),_append("#form_item_data",a)}}