function FormCache(){this.db=db.getDbInstance(),this.templates={deviation:{form_fix_deviation:{deviation:function(a){return a.results.initial_action},initial_action:"Test",deviation_date:function(a){return{date:a.results.deviation_deadline,timezone_type:3,timezone:"Asia/Bangkok"}},form:{responsible_fix_deviation:{type:"hidden",value:"Nguyen Thao"},responsible_fix_deviation_id:{type:"hidden",value:function(a){return a.results.employee_id}},correctional_measure:{label:"Korrigerende tiltak",type:"textarea",placeholder:"Beskriv hvilke korrigerende tiltak du har tatt for Ã¥ rette avviket.",validation:["required","string"]},upload_photo:{label:"Ta eller last opp bilde",type:"file"},date_deviation_fix:{type:"date",label:"Dato for retting av avvik"}},deviation_photos:function(a){return'""'}}}}}function executeForm(a,b){var c={};if(console.log("template",b),"object"==typeof b)for(key in b)console.log("key:",key,b[key]),"function"==typeof b[key]?(c[key]=b[key](a),console.log("response",c)):"object"==typeof b[key]?c[key]=executeForm(a,b[key]):c[key]=b[key],console.log("response",c);return c}function insertTaskToDB(a){a&&this.d.transaction(function(a){a.executeSql('SELECT "id","taskData" FROM "tasks" WHERE "type" != ? AND "type" != ? AND ( "taskData" IS NULL OR "taskData" = ?) ',["maintenance","food_poision","undefined"],function(a,b){if(b.rows.length>0&&!isOffline()){for(var c=0;c<b.rows.length;c++)(null===b.rows.item(c).taskData||""===b.rows.item(c).taskData||"undefined"===b.rows.item(c).taskData)&&emptytaskdata.push(b.rows.item(c).id);findTaskData()}})})}FormCache.prototype.getTemplate=function(a,b){b(this.templates[name])},FormCache.prototype.saveToTaskList=function(a,b,c){console.log("cache",b);var d=this.templates[a],e=executeForm(b,d);console.log("form",e),c(this.templates[name])};