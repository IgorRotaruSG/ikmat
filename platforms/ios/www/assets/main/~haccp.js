function getHaccpCall(a,b){if(0==b.rows.length&&isOffline())$("#haccp_list_no_results").text("No HACCP to show. Please connect to internet to sync.");else if(0!=b.rows.length||isOffline()){if(b.rows.length>0){$("#haccp_list_no_results").hide();var c="";c+=getHaccpForm(),$(".swiper-slide").html(c),$(".overflow-wrapper").addClass("overflow-wrapper-hide"),$("#"+$.mobile.activePage.attr("id")).trigger("create")}}else{$("#haccp_list_no_results").text("No HACCP to show, yet.");var d={client:User.client,token:User.lastToken};Page.apiCall("haccp",d,"post","haccp")}}function getHaccp(a){a.executeSql("select * from haccp_category",[],getHaccpCall,db.dbErrorHandle)}function haccpInit(){if(User.isLogged()){var a=db.getDbInstance();a.transaction(getHaccp,db.dbErrorHandle),mySwiper=new Swiper(".swiper-container",{calculateHeight:!0,releaseFormElements:!0,preventLinks:!1,simulateTouch:!1,onSlideChangeStart:function(a){},onSlideNext:function(a){_t="save"},onSlidePrev:function(a){_t="edit"},onSlideChangeEnd:function(a){16==a.activeIndex&&setTimeout(function(){window.location.href="index.html"},3e3),$("html, body").animate({scrollTop:0},500);Form.validate(a.getSlide(a.previousIndex));"save"==_t}})}else Page.redirect("login.html")}function haccp(a){if(a.success){var b=[];if(a.haccp_category){var c='INSERT INTO "haccp_category"("id","name")',d=!1;for(var e in a.haccp_category)a.haccp_category.hasOwnProperty(e)&&(d?c+=" UNION":d=!0,c+=' SELECT "'+a.haccp_category[e].id+'" as "id", "'+a.haccp_category[e].haccp+'" as "name"',b.push({id:a.haccp_category[e].id,data:'<a href="haccp_cat.html?catId='+a.haccp_category[e].id+'" data-transition="slide"><i class="fa fa-pagelines"></i> '+a.haccp_category[e].haccp+"</a>"}));db.clean(),db.execute(c),$("#haccp_list_no_results").hide(),_append("#haccp_list",b)}}}function getHaccpForm(){var a="";return a+=Form.radioListHACCP("possibility","",["Small: Seldom or nerver","Medium: Once a month","Big: Several times a week"],!1),a+=Form.radioListHACCP("consequence","If this happens, what do you think are the consequences for your customers?",["Small: None","Medium: Food poisoning","Big: Death"],!1),a+='<table class="haccp_color_table" cellspacing="7">',a+="<tr>",a+='<td rowspan="4" style="border:0;width:10px;;height:auto;"><div style="-webkit-transform:rotate(270deg);width:12px;">Possibility</div></td>',a+="<td></td>",a+="<td>low</td>",a+='<td style="word-wrap: break-word;">medium</td>',a+="<td>high</td>",a+="</tr>",a+="<tr>",a+="<td>high</td>",a+='<td style="background:#efef00;"></td>',a+='<td style="background:#cf2a27;"></td>',a+='<td style="background:#cf2a27;"></td>',a+="</tr>",a+="<tr>",a+='<td style="word-wrap: break-word;">medium</td>',a+='<td style="background:#009e0f;"></td>',a+='<td style="background:#efef00;"></td>',a+='<td style="background:#cf2a27;"></td>',a+="</tr>",a+="<tr>",a+="<td>low</td>",a+='<td style="background:#009e0f;"></td>',a+='<td style="background:#009e0f;"></td>',a+='<td style="background:#efef00;"></td>',a+="</tr>",a+="<tr>",a+='<td colspan="5" style="border:0;width:auto;height:auto;">Consequence</td>',a+="</tr>",a+="</table>"}var mySwiper;