!function(a){a.widget("mobile.spinbox",a.mobile.widget,{options:{dmin:!1,dmax:!1,theme:!1,initSelector:"input[data-role='spinbox']",clickEvent:"vclick",type:"horizontal"},_create:function(){var b,c=this,d=a.extend(this.options,this.element.jqmData("options")),e={input:this.element,wrap:this.element.parent()};c.d=e,c.d.input.jqmData("mini")===!0&&c.d.input.addClass("ui-mini"),c.d.wrap.removeClass("ui-input-text ui-shadow-inset ui-btn-shadow").addClass("ui-controlgroup ui-controlgroup-"+d.type),"horizontal"===d.type?(c.d.wrap.css({display:"inline",whiteSpace:"nowrap",border:"none"}),c.d.input.jqmData("mini")===!0?c.d.input.css({width:"30px"}):c.d.input.css({width:"40px"})):(c.d.input.css({width:"auto"}),c.d.wrap.css({width:"auto",display:"inline-block"})),c.d.input.css({textAlign:"center"}),d.theme===!1&&(d.theme=a(this).closest("[data-theme]").attr("data-theme"),"undefined"==typeof d.theme&&(d.theme="c")),d.dmin===!1&&(d.dmin="undefined"!=typeof c.d.input.attr("min")?parseInt(c.d.input.attr("min"),10):-1*Number.MAX_VALUE),d.dmax===!1&&(d.dmax="undefined"!=typeof c.d.input.attr("max")?parseInt(c.d.input.attr("max"),10):Number.MAX_VALUE),c.d.up=a("<div>").buttonMarkup({icon:"plus",theme:d.theme,iconpos:"notext",corners:!0,shadow:!0,inline:"horizontal"===d.type}).css({marginLeft:"0px",marginBottom:"0px",marginTop:"0px",paddingLeft:"horizontal"===d.type}),c.d.down=a("<div>").buttonMarkup({icon:"minus",theme:d.theme,iconpos:"notext",corners:!0,shadow:!0,inline:"horizontal"===d.type}).css({marginRight:"0px",marginBottom:"0px",marginTop:"0px",paddingRight:"horizontal"===d.type?".4em":"0px"}),"horizontal"===d.type?(c.d.down.prependTo(c.d.wrap),c.d.up.appendTo(c.d.wrap)):(c.d.up.prependTo(c.d.wrap),c.d.down.appendTo(c.d.wrap)),a.mobile.behaviors.addFirstLastClasses._addFirstLastClasses(c.d.wrap.find(".ui-btn"),c.d.wrap.find(".ui-btn"),!0),c.d.up.on(d.clickEvent,function(a){a.preventDefault(),c.disabled||(b=parseInt(c.d.input.val(),10)+1,b<=d.dmax&&(c.d.input.val(b),c.d.input.trigger("change")))}),c.d.down.on(d.clickEvent,function(a){a.preventDefault(),c.disabled||(b=parseInt(c.d.input.val(),10)-1,b>=d.dmin&&(c.d.input.val(b),c.d.input.trigger("change")))}),"undefined"!=typeof a.event.special.mousewheel&&c.d.input.on("mousewheel",function(a,e){a.preventDefault(),c.disabled||(b=parseInt(c.d.input.val(),10)+(0>e?-1:1),b>=d.dmin&&b<=d.dmax&&(c.d.input.val(b),c.d.input.trigger("change")))})},disable:function(){this.d.input.attr("disabled",!0),this.d.input.addClass("ui-disabled").blur(),this.disabled=!0},enable:function(){this.d.input.attr("disabled",!1),this.d.input.removeClass("ui-disabled"),this.disabled=!1}}),a(document).bind("pagecreate create",function(b){a.mobile.spinbox.prototype.enhanceWithin(b.target,!0)})}(jQuery);