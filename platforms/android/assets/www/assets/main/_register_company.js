function close_help(){closed_help=!0,$(".swipe_help").css("display","none")}function object_merge(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function register_companyInit(){$("#no_results").text("Loading ..."),mySwiper=new Swiper(".swiper-container",{calculateHeight:!0,releaseFormElements:!0,preventLinks:!1,simulateTouch:!1,onInit:function(){setSwiperMinHeight()},onSlideChangeStart:function(a){},onSlideNext:function(a){_t="save"},onSlidePrev:function(a){_t="edit"},onSlideChangeEnd:function(a){if(mySwiper.resizeFix(),parseInt(a.activeIndex)==parseInt(a.previousIndex)&&a.previousIndex--,18==t_counter&&setTimeout(function(){window.location.href="index.html"},3e3),$("html, body").animate({scrollTop:0},500),"save"==_t){$(".overflow-wrapper").removeClass("overflow-wrapper-hide");var b=Form.validate(a.getSlide(a.previousIndex));if(b){var c=Form.getValues(a.getSlide(a.previousIndex));company_data&&(c=object_merge(company_data,c)),currentStep=a.activeIndex+1;var d={step:t_counter,parameters:JSON.stringify(c)};t_counter=parseInt(t_counter)+1,loadedSteps.push(a.activeIndex),Page.apiCall("newCompanyRegistration",d,"post","newCompanyRegistration"),cleanup=a.previousIndex}else a.swipePrev(),$(".overflow-wrapper").addClass("overflow-wrapper-hide")}}}),data={step:1},Page.apiCall("newCompanyRegistration",data,"post","newCompanyRegistration")}function newCompanyRegistration(a){if(console.log("---------------------------------------------------------------------------"),console.log("trigger step received"),$(".overflow-wrapper").addClass("overflow-wrapper-hide"),a.success)if(a.registration_steps.error){t_counter=parseInt(t_counter)-1,mySwiper.swipePrev();var b=a.registration_steps[0],c=[];for(var d in b)b.hasOwnProperty(d)&&"audit_participants"!=d&&c.push(b[d]);var e=$(mySwiper.activeSlide());if(-1!=c.indexOf("company_email")){var f=e.find('input[name="email"]');$('<label id="'+f.attr("id")+'_validate" class="validate_error">This email address already exists.</label>').insertAfter(f.parent())}if(-1!=c.indexOf("haccp_resonsible")){var f=e.find('input[name="responsible_for_haccp"]');$('<label id="'+f.attr("id")+'_validate" class="validate_error">This email address already exists.</label>').insertAfter(f.parent())}if(void 0!=b.audit_participants){var g=b.audit_participants,h=e.find('input[name="internal_audit_participant[]"]');for(var d in g)g.hasOwnProperty(d)&&h.each(function(){return $(this).val()==g[d]?($('<label id="'+$(this).attr("id")+'_validate" class="validate_error">This email address already exists.</label>').insertAfter($(this).parent()),!1):void 0})}}else{if(cleanup!==!1&&(mySwiper.removeSlide(cleanup),mySwiper.reInit(),mySwiper.resizeFix()),18==t_counter){var i='<div class="no_results" style="color:#00cde7;font-size:34px;">'+$.t("register.success_message")+"</div>";mySwiper.appendSlide(i,"swiper-slide")}var j,i="";for(var d in a.registration_steps)if(a.registration_steps.hasOwnProperty(d))if("aux"!=d){i='<div style="padding:0 10px;"><form onsubmit="return false;">';for(var k in a.registration_steps[d])if(a.registration_steps[d].hasOwnProperty(k)&&(j=a.registration_steps[d][k],void 0!=j.input))switch(j.input.type){case"text":i+=Form.inputText(k,j.label,j.input.placeholder,j.validation,j.name,j.value);break;case"multiple_text":i+="form12"==d||"form13"==d||"form14"==d||"form15"==d||"form16"==d?Form.multipleInputTextFridge(k,j.label,j.input.placeholder,j.validation,j.input.fields):"form17"==d?Form.multipleInputTextDishWasher(k,j.label,j.input.placeholder,j.validation,j.input.fields):Form.multipleInputText(k,j.label,j.input.placeholder,j.validation);break;case"textarea":i+=Form.textarea(k,j.label,j.input.placeholder,j.validation);break;case"select":i+=Form.selectBox(k,j.label,j.input.data,j.input.placeholder,j.validation);break;case"checkbox_list":i+=Form.checkboxList(k,j.label,j.input.value,j.answers,j.name);break;case"multiple_text_color":i+=Form.multipleTextColor(k,j.label,j.answers);break;case"radio_list":i+="form7"==d||"form9"==d||"form8"==d||"form11"==d?Form.radioList(k,j.label,j.input.value,j.answers,j.name,!0):Form.radioList(k,j.label,j.input.value,j.answers,j.name);break;case"date":i+="form7"==d||"form9"==d||"form8"==d||"form11"==d?Form.inputDate(k,j.label,j.input.placeholder,!0):"form12"==d||"form13"==d||"form14"==d||"form15"==d||"form16"==d||"form17"==d?Form.inputDateV(k,j.label,j.input.placeholder,!1,null,!0):Form.inputDate(k,j.label,j.input.placeholder);break;case"custom":i+=Form.customStep10(k,j.label,j.measurement_question_id,j.frequency,j.haccp);break;case"text_clicker":i+=Form.clickIncrement(k,j.label,j.input.data,j.validation)}i+=Form.inputHidden("update","false"),i+=Form.inputCancel("index.html"),i+="</form></div>",mySwiper.appendSlide(i,"swiper-slide")}else company_data=a.registration_steps[d],company_data.currentCompany=company_data.lastCompanyId;$("#"+$.mobile.activePage.attr("id")).trigger("create"),0==loadedSteps.length&&($(".overflow-wrapper").addClass("overflow-wrapper-hide"),mySwiper.reInit(),mySwiper.resizeFix(),mySwiper.removeSlide(0)),colorpicker&&($(".color-pallet-table").find("td").off("click").on("click",function(){sel_colorpicker.css("background-color",$(this).data("color")),sel_colorpicker.find("input").val($(this).data("color")),$("#popupDialog").popup("close")}),$(".colorpicker-bind").off("click").on("click",function(){sel_colorpicker=$(this),$(".color-pallet-table").find("td").each(function(){$(this).data("color")==sel_colorpicker.find("input").val()?$(this).find("img").css("visibility","visible"):$(this).find("img").css("visibility","hidden")}),$("#popupDialog").popup("open")}),colorpicker=!1)}}function function_asd(){var a=Form.getValues(mySwiper.getSlide(0));return console.log(a),!1}var mySwiper,loadedSteps=[],currentStep=0,colorpicker=!1,sel_colorpicker=!1,company_data=!1,closed_help=!1,_t=!1,cleanup=!1,t_counter=1,lid="";