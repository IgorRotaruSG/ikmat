function Page(a){void 0!=a&&(this.currentPage=a,this.settings=settings,this.db=!1,this.defaultPage="tasks.html"),$.ajaxPrefilter(function(a,b,c){var d=a.success;a.success=function(a,b,c){if(a&&a.locked)lockedError($.t("error.suspended_account"));else if("function"==typeof d)return d.apply(this,[a,b,c])};var e=a.error;a.error=function(a,b,c){return"function"==typeof e?e.apply(this,[a,b,c]):void 0}})}function cacheImage(a,b){if(a&&a.imageURI&&a.task_id)if(isNative())db.lazyQuery("sync_query",[{api:"uploadPhotos",data:JSON.stringify(a),extra:a.task_id,q_type:"uploadDone"}],b);else{var c,d=new XMLHttpRequest;d.open("GET",a.imageURI,!0),d.responseType="arraybuffer",d.onload=function(e){if(c=new Blob([d.response],{type:"image/jpg"}),isOffline()){var f=new window.FileReader;f.readAsDataURL(c),f.onloadend=function(){a.data=f.result,db.lazyQuery("sync_query",[{api:"uploadPhotos",data:JSON.stringify(a),extra:a.task_id,q_type:"uploadDone"}],b)}}},d.send()}}function parseQuery(a){if(a){for(var b={},c=a.substr(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return b}return""}function User(){this.sessionName="user_data",this.client=!1,this.lastToken=!1}function saveUserHandle(){db.lazyQuery("settings",[{_id:"client",type:"client",value:User.client},{_id:"token",type:"token",value:User.lastToken}],function(){$(".sm-success").fadeIn(1e3),$(".sm-failed").fadeOut(500),fromLandingPage?location.href=settings.apiPath+"/app/index.html":Page.redirect(Page.defaultPage)})}function logout(){logout_flag=!0,db.dbDropTables().then(function(){User.database=!1,User.client=!1,User.lastToken=!1,isNative()?window.location.reload():window.location.href=settings.apiPath})}function Form(){}function validateEmail(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function multipleInputTextRemove(a){$(a).parent().parent().remove()}function multipleInputTextRemoveC2(a){$(a).parent().parent().parent().remove()}function multipleInputText(a){$el=$(a);var b=$el.parent().parent(),c=b.find(".ui-block-a").find("input").attr("name"),d=b.find(".ui-block-a").find("input").attr("placeholder"),e="";e+='<fieldset class="ui-grid-a">',e+='    <div class="ui-block-a" style="width:80%;">',e+='        <input name="'+c+'"  type="text" value="" placeholder="'+d+'"/>',e+="    </div>",e+='    <div class="ui-block-b" style="width:20%;">',e+='        <a href="#" data-role="button" onclick="multipleInputTextRemove(this);"><i class="fa fa-minus"></i></a>',e+="    </div>",e+="</fieldset>",$(e).insertAfter(b).trigger("create")}function multipleInputTextC(a){$el=$(a);var b=$el.parent().parent(),c=(b.find(".ui-block-a").find("input").attr("name"),b.find(".ui-block-a").find("input").attr("placeholder"),""),d=md5((new Date).getTime())+"_added";c+='<fieldset class="ui-grid-a">',c+='    <div class="ui-block-a" style="width:80%;">',c+='        <input name="name['+d+']" class="multiple_fridges" type="text" value="" placeholder="name"/>',c+="    </div>",c+='    <div class="ui-block-b" style="width:20%;">',c+='        <a href="#" data-role="button" onclick="multipleInputTextRemove(this);"><i class="fa fa-minus"></i></a>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Default Temperature</label>",c+='        <input name="default_temp['+d+']" class="multiple_fridges" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Max Temperature</label>",c+='        <input name="max_temp['+d+']" class="multiple_fridges" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Min Temperature</label>",c+='        <input name="min_temp['+d+']" class="multiple_fridges" value="" type="text" placeholder=""/>',c+="    </div>",c+="</fieldset>",$(c).insertAfter(b).trigger("create")}function multipleInputTextCD(a){$el=$(a);var b=$el.parent().parent(),c=(b.find(".ui-block-a").find("input").attr("name"),b.find(".ui-block-a").find("input").attr("placeholder"),""),d=md5((new Date).getTime())+"_added";c+='<fieldset class="ui-grid-a">',c+='    <div class="ui-block-a" style="width:80%;">',c+='        <input name="name['+d+']" class="multiple_dishwasher" type="text" value="" placeholder="name"/>',c+="    </div>",c+='    <div class="ui-block-b" style="width:20%;">',c+='        <a href="#" data-role="button" onclick="multipleInputTextRemove(this);"><i class="fa fa-minus"></i></a>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Wash Default Temperature</label>",c+='        <input name="wash_default_temp['+d+']" class="multiple_dishwasher" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Wash Max Temperature</label>",c+='        <input name="wash_max_temp['+d+']" class="multiple_dishwasher" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Wash Min Temperature</label>",c+='        <input name="wash_min_temp['+d+']" class="multiple_dishwasher" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Rinse Default Temperature</label>",c+='        <input name="rinse_default_temp['+d+']" class="multiple_dishwasher" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Rinse Max Temperature</label>",c+='        <input name="rinse_max_temp['+d+']" class="multiple_dishwasher" value="" type="text" placeholder=""/>',c+="    </div>",c+='    <div class="ui-block-a" style="width:80%;">',c+="        <label>Rinse Min Temperature</label>",c+='        <input name="rinse_min_temp['+d+']" class="multiple_dishwasher" value="" type="text" placeholder=""/>',c+="    </div>",c+="</fieldset>",$(c).insertAfter(b).trigger("create")}function multipleInputTextC3(a){$el=$(a);var b=$el.parent().parent().parent(),c="",d=md5((new Date).getTime())+"_added";c+="<div>",c+='<div class="ui-grid-a">',c+='    <div class="ui-block-a" style="width:80%;">',c+='        <input name="name['+d+']" value="" type="text" placeholder="name" class="multiple_fridges"/>',c+="    </div>",c+='    <div class="ui-block-b" style="width:20%;">',c+='        <a href="#" data-role="button" onclick="multipleInputTextRemoveC2(this);"><i class="fa fa-minus"></i></a>',c+="    </div>",c+="</div>",c+='<div class="multiple_fridges_reformat_input">',c+="<legend>Wash Temperature</legend>",c+='<div class="ui-grid-b">',c+='   <div class="ui-block-a">',c+="        <label>Default</label>",c+='        <input name="wash_default_temp['+d+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',c+="   </div>",c+='   <div class="ui-block-b">',c+="        <label>Max</label>",c+='        <input name="wash_max_temp['+d+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',c+="   </div>",c+='   <div class="ui-block-c">',c+="        <label>Min</label>",c+='        <input name="wash_min_temp['+d+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',c+="   </div>",c+="</div>",c+="</div>",c+='<div class="multiple_fridges_reformat_input">',c+="<legend>Rinse Temperature Wash</legend>",c+='<div class="ui-grid-b">',c+='   <div class="ui-block-a">',c+="        <label>Default</label>",c+='        <input name="rinse_default_temp['+d+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',c+="   </div>",c+='   <div class="ui-block-b">',c+="        <label>Max</label>",c+='        <input name="rinse_max_temp['+d+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',c+="   </div>",c+='   <div class="ui-block-c">',c+="        <label>Min</label>",c+='        <input name="rinse_min_temp['+d+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',c+="   </div>",c+="</div>",c+="</div>",c+="</div>",$(c).insertAfter(b).trigger("create")}function multipleInputTextC2(a){$el=$(a);var b=$el.parent().parent().parent(),c=(b.find(".ui-block-a").find("input").attr("name"),b.find(".ui-block-a").find("input").attr("placeholder"),""),d=md5((new Date).getTime())+"_added";c+="<div>",c+='<div class="ui-grid-a">',c+='    <div class="ui-block-a" style="width:80%;">',c+='        <input name="name['+d+']" value="" type="text" placeholder="name" class="multiple_fridges"/>',c+="    </div>",c+='    <div class="ui-block-b" style="width:20%;">',c+='        <a href="#" data-role="button" onclick="multipleInputTextRemoveC2(this);"><i class="fa fa-minus"></i></a>',c+="    </div>",c+="</div>",c+='<div class="multiple_fridges_reformat_input">',c+="<legend>Temperature</legend>",c+='<div class="ui-grid-b">',c+='   <div class="ui-block-a">',c+="        <label>Default</label>",c+='        <input name="default_temp['+d+']" class="multiple_fridges" value="" type="text" placeholder=""/>',c+="   </div>",c+='   <div class="ui-block-b">',c+="        <label>Max</label>",c+='        <input name="max_temp['+d+']" class="multiple_fridges" value="" type="text" placeholder=""/>',c+="   </div>",c+='   <div class="ui-block-c">',c+="        <label>Min</label>",c+='        <input name="min_temp['+d+']" class="multiple_fridges" value="" type="text" placeholder=""/>',c+="   </div>",c+="</div>",c+="</div>",c+="</div>",$(c).insertAfter(b).trigger("create")}function showToggleDiv(a){var b=$(a);"on"==b.val()?$("."+b.attr("name")).show():$("."+b.attr("name")).hide()}function toggleCustom10(a){$(a).is(":checked")?$("#custom_step10").show():$("#custom_step10").hide()}function incClick(a,b){var c=$("#"+a),d=parseInt(c.val())+parseInt(b);d>=c.data("min")&&c.val(d)}function openSignaturePopup(){window.scrollTo(0,0);var a=$("#sign_name").val();if(""==a.replace(/\s/g,""))$("#sign_name").parent().parent().find(".validate_error").remove(),$("#sign_name").parent().parent().append('<label class="validate_error">'+$.t("error.signature_name")+"</label>");else{$("#sign_name").parent().parent().find(".validate_error").remove(),$("#signature").html(""),$("#signature_pop").popup("open",{positionTo:"window"}),$(".ui-popup-container").css({top:0,left:0,"max-width":"100%",width:"100%",height:parseInt($("body").height())+"px",overflow:"hidden",position:"fixed"}),$("#signature_pop").css("height","100%"),$sigdiv=$("#signature").jSignature(),$sigdiv.jSignature("reset");var b=($("#signature_pop").height()-$("#signature").height()-40)/2;$("#signature-holder").css("margin-top",b+"px")}}function isEmpty(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function bind_menuClick(a,b){$(a).off("panelbeforeopen").on("panelbeforeopen",function(a){"haccp"==$.mobile.activePage.attr("id")&&($("#confirmDevPopup").popup("close"),mySwiper.swipePrev()),$("#swipebox-close").trigger("click")}),$(a).find("ul").listview(),$(".language").i18n(),$("dl.jqm-nav a").off("click").on("click",function(a){if(isOffline()&&-1!=settings.excludeOffline.indexOf($(this).attr("href"))&&(a.preventDefault(),a.stopPropagation(),noInternetError($.t("error.no_internet_for_sync"),null,$("span.language",this).text())),"register_edit"!=$.mobile.activePage.attr("id")&&"haccp"!=$.mobile.activePage.attr("id")){for(var b=mySwiper.slides.length,c=b;c>0;c--)mySwiper.removeSlide(1);_t="prev",mySwiper.swipeTo(0,300,!0),$("#menu_panel").panel("close"),mySwiper.resizeFix()}else{if("register_edit"!=$.mobile.activePage.attr("id"))return"haccp.html"==$(this).attr("href")&&a.preventDefault(),void $("#menu_panel").panel("close");loadBackStep(0),_t="prev",mySwiper.swipeTo(0,300,!0),$("#menu_panel").panel("close"),mySwiper.resizeFix()}}),$(a).find("#panel_user_name").html(b),contactName=$(a).find("#contact_name"),null==localStorage.getItem("contact_name")?Page.apiCall("updateContactName",{client:User.client,token:User.lastToken},"get","updateContactName"):contactName.html(localStorage.getItem("contact_name")),$(a).find("#app-version").html("IK-mat 2.0.9"),displayOnline(isOffline())}function castToListObject(a,b){var c=[];if(a instanceof Array&&b instanceof Array)for(var d=0;d<b.length;d++){for(var e={},f=0;f<a.length;f++)e[a[f].trim()]=b[d][f],e._id||"type"!=a[f].trim()||(e._id=String(b[d][f])),"id"==a[f].trim()&&(e._id=String(b[d][f]));c.push(e)}return c}function updateContactName(a){a.contact_name&&(localStorage.setItem("contact_name",a.contact_name),contactName.html(localStorage.getItem("contact_name")))}function setSwiperMinHeight(){$(".swiper-slide-active").css("min-height",document.body.clientHeight-80+"px")}function testInternetConnection(){0==loadTime?setInterval(function(){testConnection()},this.settings.syncIntervals.connectionTestInterval):console.log("not re test Connection")}function testConnection(a){if(!(navigator.onLine||navigator.connection&&navigator.connection.type!=Connection.NONE))return offline=!0,!1;loadTime=0,t0=performance.now();var b=new Image;b.src=this.settings.apiPath+"/"+this.settings.testImage+"?time="+t0;var c=this.settings.syncIntervals.loadTime;b.onload=function(){t1=performance.now(),loadTime=t1-t0,loadTime>c?offline=!0:(offline=!1,a&&a()),displayOnline(offline||isOffline())},b.onerror=function(){offline=!0,displayOnline(offline)},b=null}function checkSync(){if(0==lastSynced)return!0;var a=performance.now()-lastSynced;return a>this.settings.syncIntervals.tasks?!0:!1}function displayOnline(a){a?$("#app-online").removeClass("online"):$("#app-online").addClass("online")}function isOffline(){return(navigator.onLine||navigator.connection&&navigator.connection.type!=Connection.NONE)&&0==offline?!1:!0}function isNative(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")}function noInternetError(a,b,c){void 0===b&&(b=!1),$(".overflow-wrapper").addClass("overflow-wrapper-hide"),c&&$("#alertPopup .page-name").html(c),$("#alertPopup .alert-text").html(a),$("#alertPopup").off("popupafterclose").on("popupafterclose",function(){}),$("#alertPopup").popup("open",{positionTo:"window"})}function lockedError(a){$(".overflow-wrapper").addClass("overflow-wrapper-hide"),$("#alertPopup .page-name").html("Suspender"),$("#alertPopup .alert-text").html(a||"locked"),$("#alertPopup").off("popupafterclose").on("popupafterclose",function(){logout()}),$("#alertPopup").popup("open",{positionTo:"window"})}function executeSyncQuery(){isOffline()||(lastSynced=performance.now(),db.getDbInstance("sync_query").query("get_sync",function(a,b){if(b){var c=b.total_rows;c>0&&(_sync_data_rows=!1,testConnection(sync_query))}}))}function printPage(){var a=$("#page-wrap").find("style");if(0==a.length)$.get("assets/document/style.css",function(a){var b="<style>"+a+"</style>";$("#page-wrap").prepend(b);var c=document.getElementById("page-wrap");cordova.plugins.printer.print(c,{name:"Document.html",landscape:!0},function(){})});else{var b=document.getElementById("page-wrap");cordova.plugins.printer.print(b,{name:"Document.html",landscape:!0},function(){})}}var settings={apiDomain:"http://ikmatapp.no/api/",apiPath:"http://ikmatapp.no",apiUploadPath:"uploadPhotos",testImage:"apple-touch-icon.png",syncIntervals:{tasks:18e4,loadTime:3e3,connectionTestInterval:6e4,completed_tasks:72e5},requestTimeout:25e3,excludeOffline:["haccp.html","flowchart.html"],version:"2.0.73",rebuild:"2.0.73"},performance=window.performance,logout_flag=!1,db=new db,from_page,dontDo,fromLandingPage=!1,contactName=null;jQuery.fn.indexTabForm=function(){var a=$(this);a.find("input").each(function(){$(this).on("keypress",function(b){return 13==b.which?(b.preventDefault(),a.find("input:eq("+(parseInt($(":input").index(this))+1)+")").focus().trigger("click"),!1):void 0})})},realignSlideHeight=function(a){if(mySwiper){if(isNaN(mySwiper.activeIndex))var b=$(mySwiper.getSlide(0)).find("div:first").height();else if(mySwiper.activeIndex>mySwiper.slides.length)var b=$(mySwiper.getSlide(0)).find("div:first").height();else var b=$(mySwiper.getSlide(mySwiper.activeIndex)).find("div:first").height();b+=100,$("#"+a).css("overflow-y","scroll"),$("#"+a).css("overflow-x","hidden"),$("#"+a).css("height",document.body.clientHeight-80+"px"),$("#"+a).css("-webkit-overflow-scrolling","touch"),$(".swiper-wrapper .swiper-slide").css({height:b+"px !important"}),$(".swiper-slide").css({overflow:"auto"}),setSwiperMinHeight()}},resizePage=function(a){var b=$("#"+a).find("form").height()+200;$("#"+a).css("min-height",b+"px")},Page.prototype.reverseApiDate=function(a){var b=a.split("-");return b[2]+"-"+b[1]+"-"+b[0]},Page.prototype.isReady=function(){$.i18n.init({lng:"en"}),$(".language").i18n(),$(document).unbind("backbutton"),$(document).bind("backbutton",function(a){("index"==from_page||"login"==from_page)&&navigator.app.exitApp()});var a=window[this.currentPage+"Init"];if("function"==typeof a){db.InitDB(),a();var b=window[this.currentPage+"Async"];"function"==typeof b&&b()}else{var c=this.currentPage;$.getScript("assets/main/"+this.currentPage+".js").done(function(){var a=window[c+"Init"];if("function"==typeof a){db.InitDB(),a();var b=window[c+"Async"];"function"==typeof b&&b()}else $("#alertPopup .alert-text").html("Undefined method "+c),$("#alertPopup").on("popupafterclose",function(){$("#alertPopup").unbind("popupafterclose")}),$("#alertPopup").popup("open",{positionTo:"window"})}).fail(function(){$("#alertPopup .alert-text").html("Undefined method "+c),$("#alertPopup").on("popupafterclose",function(){$("#alertPopup").unbind("popupafterclose")}),$("#alertPopup").popup("open",{positionTo:"window"})})}},Page.prototype.init=function(a){this.currentPage!=a&&(this.currentPage=a,this.isReady())},Page.prototype.redirect=function(a){$.mobile.changePage(a,{transition:"slide"})},Page.prototype.get=function(){var a,b,c,d;if(a=window.location.href,a=a.split("?"),void 0!=a[1]){b=a[1].split("&");var e=[];for(c in b)"string"==typeof b[c]&&(d=b[c].split("="),e[d[0]]=d[1]);return e}return{}},Page.prototype.apiCall=function(a,b,c,d,e){var f=null;if(b.hasOwnProperty("token")&&b.hasOwnProperty("report_number")&&(f=JSON.parse(localStorage.getItem(encodeURIComponent(b.token+b.report_number)))),("reportTables"==a||"reports"===a&&"documentsCall"==d)&&isOffline()){var g=window[d];"function"==typeof g&&g.apply(window,[f])}else if(isOffline())noInternetError($.t("error.no_internet_for_sync"));else{var h=$.ajax({type:c.toUpperCase(),url:this.settings.apiDomain+a,dataType:"jsonp",success:function(b){var c=window[d];if("function"==typeof c&&(e?c.apply(this,[b,e]):c.apply(this,[b])),"reportTables"===a||"reports"===a&&"documentsCall"==d){var f=parseQuery(this.url);f.hasOwnProperty("token")&&f.hasOwnProperty("report_number")&&localStorage.setItem(encodeURIComponent(f.token+f.report_number),JSON.stringify(b))}},data:b,timeout:this.settings.requestTimeout});h.error(function(a,b,c){$("#alertPopup .alert-text").html($.t("error.unexpected")),$("#alertPopup").off("popupafterclose").on("popupafterclose",function(){$(".overflow-wrapper").addClass("overflow-wrapper-hide"),location.reload()}),$("#alertPopup").popup("open",{positionTo:"window"})})}},Page.prototype.selectImage=function(a,b){if(isNative())navigator.camera.getPicture(function(a){"content://com.android"==a.substring(0,21)&&(photo_split=a.split("%3A"),a="content://media/external/images/media/"+photo_split[1]),b&&b(a)},function(a){console.log("Error getting picture: "+a)},{quality:50,destinationType:navigator.camera.DestinationType.FILE_URI,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY,targetWidth:1024});else{var c=$("#"+a);c.onload=function(a){console.log("showPicture",this)},$("#take_picture").change(function(a){var c,d=a.target.files;if(d&&d.length>0){c=d[0];var e=window.URL.createObjectURL(c);b&&b(e)}}),$("#take_picture").trigger("click",a)}realignSlideHeight("max-height-form")},Page.prototype.base64toBlob=function(a,b){b=b||"";for(var c=1024,d=atob(a.split(",")[1]),e=d.length,f=Math.ceil(e/c),g=new Array(f),h=0;f>h;++h){for(var i=h*c,j=Math.min(i+c,e),k=new Array(j-i),l=i,m=0;j>l;++m,++l)k[m]=d[l].charCodeAt(0);g[h]=new Uint8Array(k)}return new Blob(g,{type:b})},Page.prototype.uploadImage=function(){var a,b,c,d;if(arguments.length>0){a=arguments[0],arguments.length>1&&"object"==typeof arguments[1]?(b=arguments[1],c=arguments[2]||null,d=arguments[3]||null):(b=null,c=arguments[1]||null,d=arguments[2]||null);var e=null;if("object"==typeof a&&a.imageURI&&a.task_id){if(a.data){var f=this.base64toBlob(a.data,"image/jpg"),g=URL.createObjectURL(f);a.imageURI=g}e=a}else"string"==typeof a&&a.length>0&&(e={imageURI:a,task_id:$('.swiper-slide-active input[name="task_id"]').val()},b&&b.task_id&&(e.task_id=b.task_id));if((!e||e.imageURI&&e.imageURI.length<=0)&&c&&c(),isOffline())return void cacheImage(e,c);if(e){var h=this.settings.apiDomain+this.settings.apiUploadPath;if(h)if(isNative()){var i=new FileUploadOptions;i.fileKey="file",i.fileName=e.imageURI.substr(e.imageURI.lastIndexOf("/")+1),i.mimeType="image/jpeg",i.chunkedMode=!1;var j={};if(j.task_id=e.task_id,j.client=User.client,j.token=User.lastToken,i.params=j,b)for(key in b)i[key]=b[key];var k=new FileTransfer;k.upload(e.imageURI,h,function(a){c&&c(a)},function(a){console.log("Upload failed: Code = "+a.code),d&&d(a)},i)}else{var l,m=new XMLHttpRequest;m.open("GET",e.imageURI,!0),m.responseType="arraybuffer",m.onload=function(a){l=new Blob([m.response],{type:"image/jpg"});var f=new FormData;if(f.append("fname",e.imageURI.substr(e.imageURI.lastIndexOf("/")+1)),f.append("file",l),f.append("client",User.client),f.append("token",User.lastToken),f.append("task_id",e.task_id),b)for(key in b)f.append(key,b[key]);$.ajax({type:"POST",url:h,data:f,processData:!1,contentType:!1,crossDomain:!0,success:function(a){c&&(window.URL.revokeObjectURL(e.imageURI),c(a))},error:function(a){d&&d(a)}})},m.send()}}}},Page.prototype.formatTaskDate=function(a){var b=new Array;b[0]="Søndag",b[1]="Mandag",b[2]="Tirsdag",b[3]="Onsdag",b[4]="Torsdag",b[5]="Fredag",b[6]="Lørdag";var c=new Array;return c[0]="januar",c[1]="februar",c[2]="mars",c[3]="april",c[4]="mai",c[5]="juni",c[6]="juli",c[7]="august",c[8]="september",c[9]="oktober",c[10]="november",c[11]="desember",b[a.getDay()]+" "+a.getDate()+". "+c[a.getMonth()]};var genImage,cImageTimeout=!1,cWidth=47,cHeight=47,cSpeed=9,cTotalFrames=18,cFrameWidth=47,s="assets/main/images/sprites.gif",fun="Page._startAnimation()";Page.prototype.showLoader=function(){clearTimeout(cImageTimeout),cImageTimeout=0,genImage=new Image,genImage.onload=function(){cImageTimeout=setTimeout(fun,0)},genImage.onerror=new Function("alert('Could not load the image')"),genImage.src=s},Page.prototype._startAnimation=function(){document.getElementById("loaderImage").innerHTML='<canvas id="canvas" width="'+cWidth+'" height="'+cHeight+'"><p>Your browser does not support the canvas element.</p></canvas>',FPS=Math.round(100/cSpeed),SECONDS_BETWEEN_FRAMES=1/FPS,g_GameObjectManager=null,g_run=genImage,g_run.width=cTotalFrames*cFrameWidth,genImage.onload=function(){cImageTimeout=setTimeout(fun,0)},initCanvas()},User.prototype.login=function(a,b){this.client=a,this.lastToken=b,this.saveSession()},User.prototype.setToken=function(a){this.lastToken=a},User.prototype.saveSession=function(){localStorage.setItem(this.sessionName,JSON.stringify({client:this.client,lastToken:this.lastToken})),saveUserHandle()},User.prototype.isLogged=function(){return this.lastToken&&this.client?!0:!1},User.prototype.logout=function(){var a={client:this.client,token:this.lastToken};isNative()&&window.deviceToken&&(a.devicetoken=window.deviceToken),Page.apiCall("logout",a,"get","logout")};var User=new User;Form.prototype.validate=function(a){var b=$(a);return b.find("[data-validation]").matchValidateRules()},Form.prototype.generateValidation=function(a){if(a&&void 0!=a&&void 0!=a.length){for(var b='data-validation="',c=0;c<a.length;c++)b+=a[c]+" ";return b=b.slice(0,-1),b+='" '}return""},Form.prototype.getValues=function(a){var b,c,d={};return $(a).find("input, select, textarea").each(function(){$(this).hasClass("multiple_fridges")?(void 0==d.fridge&&(d.fridge={}),b=$(this).attr("name"),c=b.match(/(.*)?\[(.*?)\]/),void 0==d.fridge[c[2]]&&(d.fridge[c[2]]={},c[2].indexOf("_added")!==!1?d.fridge[c[2]].updated="updated":d.fridge[c[2]].updated="new",d.fridge[c[2]].values={},d.fridge[c[2]].values.category=$(a).find(".multiple_fridges_cat").val(),d.fridge[c[2]].start_date=$(a).find(".multiple_fridges_start_date").val()),d.fridge[c[2]].values[c[1]]=$(this).val()):$(this).hasClass("multiple_dishwasher")?(void 0==d.dishwasher&&(d.dishwasher={}),b=$(this).attr("name"),c=b.match(/(.*)?\[(.*?)\]/),void 0==d.dishwasher[c[2]]&&(d.dishwasher[c[2]]={},-1!==c[2].indexOf("_added")?d.dishwasher[c[2]].updated="updated":d.dishwasher[c[2]].updated="new",d.dishwasher[c[2]].values={},d.dishwasher[c[2]].start_date=$(a).find(".multiple_fridges_start_date").val()),d.dishwasher[c[2]].values[c[1]]=$(this).val()):!$(this).is("input")||"checkbox"!=$(this).attr("type")&&"radio"!=$(this).attr("type")?(b=$(this).attr("name")+"",-1!=b.indexOf("[")?(c=b.match(/(.*)?\[(.*?)\]/),void 0==d[c[1]]&&(d[c[1]]=[]),d[c[1]].push($(this).val())):d[b]=$(this).val()):$(this).is(":checked")&&"radio"==$(this).attr("type")?(b=$(this).attr("name"),-1!=b.indexOf("[")?(c=b.match(/(.*)?\[(.*?)\]/),void 0==d[c[1]]&&(d[c[1]]={}),d[c[1]][c[2]]=$(this).val()):d[b]=$(this).val()):$(this).is(":checked")&&(b=$(this).attr("name"),-1!=b.indexOf("[")?(c=b.match(/(.*)?\[(.*?)\]/),void 0==d[c[1]]&&(d[c[1]]=[]),d[c[1]].push(c[2])):d[b]=!0)}),d},Form.prototype.inputText=function(a,b,c,d,e,f){var g='<label for="frm_label_'+md5(a+b)+'">'+b+"</label>";return g+='<input name="'+a+'" value="" placeholder="'+c+'" id="frm_label_'+md5(a+b)+'" '+this.generateValidation(d)+"/>",void 0!=e&&e&&(g+='<input type="hidden" name="'+e+'" value="'+f+'">'),g},Form.prototype.inputTextV=function(a,b,c,d,e){var f='<label for="frm_label_'+md5(a+b)+'">'+b+"</label>";return f+='<input name="'+a+'" placeholder="'+c+'" id="frm_label_'+md5(a+b)+'" value="'+e+'" '+this.generateValidation(d)+"/>"};var k_s=0;Form.prototype.inputHidden=function(a,b){return'<input type="hidden" name="'+a+'" value="'+b+'" />'},Form.prototype.multipleInputText=function(a,b,c,d){var e="";return e+='<div class="ui-grid-solo">',e+="        <label>"+b+"</label>",e+="</div>",e+='<fieldset class="ui-grid-a">',e+='    <div class="ui-block-a" style="width:80%;">',e+='        <input name="'+a+'[]" value="" type="text" placeholder="'+c+'" '+this.generateValidation(d)+"/>",e+="    </div>",e+='    <div class="ui-block-b" style="width:20%;">',e+='        <a href="#" data-role="button" onclick="multipleInputText(this);"><i class="fa fa-plus"></i></a>',e+="    </div>",e+="</fieldset>"},Form.prototype.multipleInputTextV=function(a,b,c,d,e){var f="";f+='<div class="ui-grid-solo">',f+="        <label>"+b+"</label>",f+="</div>";var g=!0;for(var h in e)e.hasOwnProperty(h)&&(g?(f+='<fieldset class="ui-grid-a">',f+='    <div class="ui-block-a" style="width:80%;">',f+='        <input name="'+a+'[]" value="'+e[h]+'" type="text" placeholder="'+c+'" '+this.generateValidation(d)+"/>",f+="    </div>",f+='    <div class="ui-block-b" style="width:20%;">',f+='        <a href="#" data-role="button" onclick="multipleInputText(this);"><i class="fa fa-plus"></i></a>',f+="    </div>",f+="</fieldset>",g=!1):(f+='<fieldset class="ui-grid-a">',f+='    <div class="ui-block-a" style="width:80%;">',f+='        <input name="'+a+'"  type="text" value="'+e[h]+'" placeholder="'+c+'"/>',f+="    </div>",f+='    <div class="ui-block-b" style="width:20%;">',f+='        <a href="#" data-role="button" onclick="multipleInputTextRemove(this);"><i class="fa fa-minus"></i></a>',f+="    </div>",f+="</fieldset>"));return f},Form.prototype.multipleInputTextFridge=function(a,b,c,d,e){var f="";return f+="<div>",f+='<div class="ui-grid-solo">',f+="        <label>"+b+"</label>",f+="</div>",f+='<div class="ui-grid-a">',f+='    <div class="ui-block-a" style="width:80%;">',f+='        <input name="name[]" value="" type="text" placeholder="" class="multiple_fridges"/>',f+="    </div>",f+='    <div class="ui-block-b" style="width:20%;">',f+='        <a href="#" data-role="button" onclick="multipleInputTextC2(this);"><i class="fa fa-plus"></i></a>',f+="    </div>",f+="</div>",f+='<div class="multiple_fridges_reformat_input">',f+="<legend>Temperature</legend>",f+='<div class="ui-grid-b">',f+='   <div class="ui-block-a">',f+="        <label>Default</label>",f+='        <input name="default_temp[]" class="multiple_fridges" value="" type="number" placeholder=""/>',f+="   </div>",f+='   <div class="ui-block-b">',f+="        <label>Max</label>",f+='        <input name="max_temp[]" class="multiple_fridges" value="" type="number" placeholder=""/>',f+="   </div>",f+='   <div class="ui-block-c">',f+="        <label>Min</label>",f+='        <input name="min_temp[]" class="multiple_fridges" value="" type="number" placeholder=""/>',f+="   </div>",f+="</div>",f+="</div>",f+="</div>"},Form.prototype.multipleInputTextDishWasher=function(a,b,c,d,e){var f=md5((new Date).getTime())+"_new",g="";return g+="<div>",g+='<div class="ui-grid-solo">',g+="        <label>"+b+"</label>",g+="</div>",g+='<div class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="name['+f+']" value="" type="text" placeholder="" class="multiple_dishwasher"/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextC3(this);"><i class="fa fa-plus"></i></a>',g+="    </div>",g+="</div>",g+='<div class="multiple_fridges_reformat_input">',g+="<legend>Wash Temperature</legend>",g+='<div class="ui-grid-b">',g+='   <div class="ui-block-a">',g+="        <label>Default</label>",g+='        <input name="wash_default_temp['+f+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',g+="   </div>",g+='   <div class="ui-block-b">',g+="        <label>Max</label>",g+='        <input name="wash_max_temp['+f+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',g+="   </div>",g+='   <div class="ui-block-c">',g+="        <label>Min</label>",g+='        <input name="wash_min_temp['+f+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',g+="   </div>",g+="</div>",g+="</div>",g+='<div class="multiple_fridges_reformat_input">',g+="<legend>Rinse Temperature Wash</legend>",g+='<div class="ui-grid-b">',g+='   <div class="ui-block-a">',g+="        <label>Default</label>",g+='        <input name="rinse_default_temp['+f+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',g+="   </div>",g+='   <div class="ui-block-b">',g+="        <label>Max</label>",g+='        <input name="rinse_max_temp['+f+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',g+="   </div>",g+='   <div class="ui-block-c">',g+="        <label>Min</label>",g+='        <input name="rinse_min_temp['+f+']" class="multiple_dishwasher" value="" type="number" placeholder=""/>',g+="   </div>",g+="</div>",g+="</div>",g+="</div>"},Form.prototype.multipleInputTextVC=function(a,b,c,d,e,f){var g="";g+='<div class="ui-grid-solo">',g+="        <label>"+b+"</label>",g+="</div>";var h=!0;for(var i in f)f.hasOwnProperty(i)&&(h?void 0!=f[i]&&void 0!=f[i].fridge_id?(g+='<fieldset class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="name['+f[i].fridge_id+']" value="'+f[i].name+'" type="text" placeholder="" class="multiple_fridges"/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextC(this);"><i class="fa fa-plus"></i></a>',g+="    </div>",(null==f[i].temperature.default_temp||"null"==f[i].temperature.default_temp)&&(f[i].temperature.default_temp=""),(null==f[i].temperature.max_temp||"null"==f[i].temperature.max_temp)&&(f[i].temperature.max_temp=""),
(null==f[i].temperature.min_temp||"null"==f[i].temperature.min_temp)&&(f[i].temperature.min_temp=""),g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Default Temperature</label>",g+='        <input name="default_temp['+f[i].fridge_id+']" class="multiple_fridges" value="'+f[i].temperature.default_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Max Temperature</label>",g+='        <input name="max_temp['+f[i].fridge_id+']" class="multiple_fridges" value="'+f[i].temperature.max_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Min Temperature</label>",g+='        <input name="min_temp['+f[i].fridge_id+']" class="multiple_fridges" value="'+f[i].temperature.min_temp+'" type="text" placeholder=""/>',g+="    </div>",g+="</fieldset>",h=!1):(g+='<fieldset class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="name[]" value="" type="text" placeholder="" class="multiple_fridges"/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextC(this);"><i class="fa fa-plus"></i></a>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Default Temperature</label>",g+='        <input name="default_temp[]" class="multiple_fridges" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Max Temperature</label>",g+='        <input name="max_temp[]" class="multiple_fridges" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Min Temperature</label>",g+='        <input name="min_temp[]" class="multiple_fridges" value="" type="text" placeholder=""/>',g+="    </div>",g+="</fieldset>",h=!1):void 0!=f[i]&&void 0!=f[i].fridge_id&&(g+='<fieldset class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="fridges['+f[i].fridge_id+']" class="multiple_fridges" type="text" value="'+e[i]+'" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextRemove(this);"><i class="fa fa-minus"></i></a>',g+="    </div>",(null==f[i].temperature.default_temp||"null"==f[i].temperature.default_temp)&&(f[i].temperature.default_temp=""),(null==f[i].temperature.max_temp||"null"==f[i].temperature.max_temp)&&(f[i].temperature.max_temp=""),(null==f[i].temperature.min_temp||"null"==f[i].temperature.min_temp)&&(f[i].temperature.min_temp=""),g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Default Temperature</label>",g+='        <input name="fridges_default_temp['+f[i].fridge_id+']" class="multiple_fridges" value="'+f[i].temperature.default_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Max Temperature</label>",g+='        <input name="fridges_max_temp['+f[i].fridge_id+']" class="multiple_fridges" value="'+f[i].temperature.max_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Min Temperature</label>",g+='        <input name="fridges_min_temp['+f[i].fridge_id+']" class="multiple_fridges" value="'+f[i].temperature.min_temp+'" type="text" placeholder=""/>',g+="    </div>",g+="</fieldset>"));return g},Form.prototype.multipleInputTextVD=function(a,b,c,d,e,f){var g="";g+='<div class="ui-grid-solo">',g+="        <label>"+b+"</label>",g+="</div>";var h=!0;for(var i in f)f.hasOwnProperty(i)&&(h?void 0!=f[i]&&void 0!=f[i].id?(g+='<fieldset class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="name['+f[i].id+']" value="'+f[i].name+'" type="text" placeholder="" class="multiple_dishwasher"/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextCD(this);"><i class="fa fa-plus"></i></a>',g+="    </div>",(null==f[i].temperature.default_temp||"null"==f[i].temperature.default_temp)&&(f[i].temperature.default_temp=""),(null==f[i].temperature.max_temp||"null"==f[i].temperature.max_temp)&&(f[i].temperature.max_temp=""),(null==f[i].temperature.min_temp||"null"==f[i].temperature.min_temp)&&(f[i].temperature.min_temp=""),g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Default Temperature</label>",g+='        <input name="wash_default_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].temperature.default_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Max Temperature</label>",g+='        <input name="wash_max_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].temperature.max_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Min Temperature</label>",g+='        <input name="wash_min_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].temperature.min_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Default Temperature</label>",g+='        <input name="rinse_default_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].rinse.rinse_default_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Max Temperature</label>",g+='        <input name="rinse_max_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].rinse.rinse_max_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Min Temperature</label>",g+='        <input name="rinse_min_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].rinse.rinse_min_temp+'" type="text" placeholder=""/>',g+="    </div>",g+="</fieldset>",h=!1):(g+='<fieldset class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="name[]" value="" type="text" placeholder="" class="multiple_dishwasher"/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextCD(this);"><i class="fa fa-plus"></i></a>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Default Temperature</label>",g+='        <input name="wash_default_temp[]" class="multiple_dishwasher" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Max Temperature</label>",g+='        <input name="wash_max_temp[]" class="multiple_dishwasher" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Min Temperature</label>",g+='        <input name="wash_min_temp[]" class="multiple_dishwasher" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Default Temperature</label>",g+='        <input name="rinse_default_temp[]" class="multiple_dishwasher" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Max Temperature</label>",g+='        <input name="rinse_max_temp[]" class="multiple_dishwasher" value="" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Min Temperature</label>",g+='        <input name="rinse_min_temp[]" class="multiple_dishwasher" value="" type="text" placeholder=""/>',g+="    </div>",g+="</fieldset>",h=!1):void 0!=f[i]&&void 0!=f[i].id&&(g+='<fieldset class="ui-grid-a">',g+='    <div class="ui-block-a" style="width:80%;">',g+='        <input name="fridges['+f[i].fridge_id+']" class="multiple_dishwasher" type="text" value="'+e[i]+'" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-b" style="width:20%;">',g+='        <a href="#" data-role="button" onclick="multipleInputTextRemove(this);"><i class="fa fa-minus"></i></a>',g+="    </div>",(null==f[i].temperature.default_temp||"null"==f[i].temperature.default_temp)&&(f[i].temperature.default_temp=""),(null==f[i].temperature.max_temp||"null"==f[i].temperature.max_temp)&&(f[i].temperature.max_temp=""),(null==f[i].temperature.min_temp||"null"==f[i].temperature.min_temp)&&(f[i].temperature.min_temp=""),g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Default Temperature</label>",g+='        <input name="wash_default_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].temperature.default_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Max Temperature</label>",g+='        <input name="wash_max_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].temperature.max_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Wash Min Temperature</label>",g+='        <input name="wash_min_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].temperature.min_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Default Temperature</label>",g+='        <input name="rinse_default_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].rinse.rinse_default_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Max Temperature</label>",g+='        <input name="rinse_max_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].rinse.rinse_max_temp+'" type="text" placeholder=""/>',g+="    </div>",g+='    <div class="ui-block-a" style="width:80%;">',g+="        <label>Rinse Min Temperature</label>",g+='        <input name="rinse_min_temp['+f[i].id+']" class="multiple_dishwasher" value="'+f[i].rinse.rinse_min_temp+'" type="text" placeholder=""/>',g+="    </div>",g+="</fieldset>"));return g},Form.prototype.textarea=function(a,b,c,d,e){void 0==b&&(b=""),void 0==c&&(c="");var f='<label for="frm_label_'+md5(a+b)+'">'+b+"</label>";return f+='<textarea name="'+a+'" placeholder="'+c+'" id="frm_label_'+md5(a+b)+'" '+this.generateValidation(d)+">"+(void 0!=e?e:"")+"</textarea>"},Form.prototype.selectBox=function(a,b,c,d,e){var f='<label for="'+md5(a+b)+'" class="select">'+b+"</label>";f+='<select name="'+a+'" id="'+md5(a+b)+'" '+this.generateValidation(e)+">",f+='<option value="-1">'+d+"</option>";for(var g in c)if(c.hasOwnProperty(g))if("object"==typeof c[g]){for(var h in c[g])break;f+='<option value="'+h+'">'+c[g][h]+"</option>"}else f+='<option value="'+g+'">'+c[g]+"</option>";return f+="</select>"},Form.prototype.fileBox=function(a,b){haccp_image_id="image_"+md5(a+b);var c='<div data-role="controlgroup">';return isNative()||(c+='<div class="hidden"><input type="file" id="take_picture" accept="image/*"></div>'),isNative()&&(c+='<a href="#" onclick="takeHACCPPicture(\'image_'+md5(a+b)+'\');" data-role="button" data-theme="e"><i class="fa fa-camera pull-left"></i>'+$.t("pictures.take")+"</a>"),c+='<a href="#" onclick="selectHACCPPicture(\'image_'+md5(a+b)+'\');" data-role="button" data-theme="e"><i class="fa fa-files-o pull-left"></i>'+$.t("pictures.select")+"</a>",c+="</div>",c+='<img width="100%" height="auto" style="visibility:hidden;display:none;margin:0 auto;" id="image_'+md5(a+b)+'" src="" />'},Form.prototype.signature=function(a,b){var c="<label>"+$.t("haccp.signature")+'</label><div class="ui-grid-a"><div class="ui-block-a"><input type="text" name="name" id="sign_name" placeholder=""/></div><div class="ui-block-b"><input type="submit" value="'+$.t("general.sign_button")+'" id="signature-trigger" data-position-to="window"/></div></div>';return c},Form.prototype.checkboxList=function(a,b,c,d,e){var f='<fieldset data-role="controlgroup">';f+='<input type="hidden" name="'+a+'" value="'+c+'" />',f+="<legend>"+b+"</legend>";for(var g in d)d.hasOwnProperty(g)&&void 0!=d[g].answer&&(f+='<input name="'+e+"["+g+']" id="'+md5(a+g)+'" type="checkbox">',f+='<label for="'+md5(a+g)+'">'+d[g].answer.label+"</label>");return f+="</fieldset>"},Form.prototype.checkboxListV=function(a,b,c,d,e){var f='<fieldset data-role="controlgroup">';f+='<input type="hidden" name="'+a+'" value="'+c+'" />',f+="<legend>"+b+"</legend>";for(var g in d)d.hasOwnProperty(g)&&void 0!=d[g].answer&&(f+='<input name="'+e+"["+g+']" id="'+md5(a+g)+'" type="checkbox"'+("checked"==d[g].answer.checked?' checked="checked"':"")+">",f+='<label for="'+md5(a+g)+'">'+d[g].answer.label+"</label>");return f+="</fieldset>"},Form.prototype.radioList=function(a,b,c,d,e,f){var g=!1,h='<fieldset data-role="controlgroup">';void 0==e&&(g=!0),g||(h+='<input type="hidden" name="'+a+'" value="'+c+'" />'),h+="<legend>"+b+"</legend>",void 0!=f&&f&&(lid=md5(a+b+c+"slide"),h+='<select name="'+md5(a+b+c+"slide")+'" data-role="slider" onchange="showToggleDiv(this);">',h+='<option value="off">No</option>',h+='<option value="on">Yes</option>',h+="</select>",h+='<div style="display:none;" class="'+md5(a+b+c+"slide")+'">');for(var i in d)d.hasOwnProperty(i)&&(h+=g?5==i?'<input name="'+a+'" id="'+md5(a+i)+'" type="radio" value="'+i+'" checked>':'<input name="'+a+'" id="'+md5(a+i)+'" type="radio" value="'+i+'">':5==i?'<input name="'+e+'" id="'+md5(a+i)+'" type="radio" value="'+i+'" checked>':'<input name="'+e+'" id="'+md5(a+i)+'" type="radio" value="'+i+'">',h+='<label for="'+md5(a+i)+'">'+d[i]+"</label>");return void 0!=f&&f&&(h+="</div>"),h+="</fieldset>"},Form.prototype.radioListV=function(a,b,c,d,e,f,g,h){var i=!1,j=!1,k='<fieldset data-role="controlgroup">';if(void 0==e&&(i=!0),i||(k+=h?'<input type="hidden" name="'+a+'" value="'+c+'" class="multiple_fridges_cat" />':'<input type="hidden" name="'+a+'" value="'+c+'" />'),k+="<legend>"+b+"</legend>",lid=md5(a+b+c+"slide"),void 0!=g&&"object"==typeof g){for(j in g)break;lid_opn[lid]=g[j],null!=lid_opn[lid]&&void 0!=lid_opn[lid].frequency_id&&(j=lid_opn[lid].frequency_id)}void 0!=f&&f&&(k+='<select name="'+md5(a+b+c+"slide")+'" data-role="slider" onchange="showToggleDiv(this);">',void 0!=g&&"object"==typeof g?(k+='<option value="off">No</option>',k+='<option value="on" selected>Yes</option>'):(k+='<option value="off" selected>No</option>',k+='<option value="on">Yes</option>'),k+="</select>",void 0!=g&&"object"==typeof g?k+='<div style="display:block;" class="'+md5(a+b+c+"slide")+'">':(lid_opn[lid]=!1,k+='<div style="display:none;" class="'+md5(a+b+c+"slide")+'">'));for(var l in d)d.hasOwnProperty(l)&&(k+=i?l==j?'<input name="'+a+'" id="'+md5(a+l)+'" type="radio" value="'+l+'" checked>':j===!1||5==l?'<input name="'+a+'" id="'+md5(a+l)+'" type="radio" value="'+l+'" checked>':'<input name="'+a+'" id="'+md5(a+l)+'" type="radio" value="'+l+'">':l==j?'<input name="'+e+'" id="'+md5(a+l)+'" type="radio" value="'+l+'" checked>':j===!1||5==l?'<input name="'+e+'" id="'+md5(a+l)+'" type="radio" value="'+l+'" checked>':'<input name="'+e+'" id="'+md5(a+l)+'" type="radio" value="'+l+'">',k+='<label for="'+md5(a+l)+'">'+d[l]+"</label>");return void 0!=f&&f&&(k+="</div>"),k+="</fieldset>"},Form.prototype.radioListHACCP=function(a,b,c,d){var e={0:"#6ca604",1:"#ffa800",2:"#cf2a27"},f='<fieldset data-role="controlgroup">';f+="<legend>"+b+"</legend>";for(var g in c)c.hasOwnProperty(g)&&(d!==!1?(f+='<input name="'+a+'" type="radio" value="'+g+'" id="haccp_radio_'+a+"_"+d+"_"+g+'">',f+='<label for="haccp_radio_'+a+"_"+d+"_"+g+'"><i class="fa fa-square" style="color:'+e[g]+';"></i> '+c[g]+"</label>"):(f+='<input name="'+a+'" id="'+md5(a+g)+'" type="radio" value="'+g+'">',f+='<label for="'+md5(a+g)+'"><i class="fa fa-square" style="color:'+e[g]+';"></i> '+c[g]+"</label>"));return f+="</fieldset>"},Form.prototype.submitHACCP=function(){return'<input type="submit" data-theme="d" value="'+$.t("general.save_button")+'"/>'},Form.prototype.submitButton=function(a){return void 0==a&&(a=$.t("general.save_button")),'<button data-theme="d">'+a+"</button>"},Form.prototype.inputDate=function(a,b,c,d){var e="";return void 0!=d&&d&&(e+='<div style="display:none;" class="'+lid+'">'),e+='<label for="frm_label_'+md5(b)+'">'+b+"</label>",e+='<input name="'+a+'" placeholder="'+c+'" id="frm_label_'+md5(b)+'" type="date" />',void 0!=d&&d&&(e+="</div>"),e},Form.prototype.inputDateV=function(a,b,c,d,e,f){var g="";if(void 0!=d&&d?g+=lid_opn[lid]!==!1?'<div style="display:block;" class="'+lid+'">':'<div style="display:none;" class="'+lid+'">':lid_opn=!1,g+='<label for="frm_label_'+md5(b)+'">'+b+"</label>",lid_opn!==!1&&lid_opn[lid]!==!1){if(null!=lid_opn[lid]&&void 0!=lid_opn[lid].date)var h=new Date(lid_opn[lid].date);else if(null!=lid_opn[lid]&&void 0!=lid_opn[lid].start_date.date)var h=new Date(lid_opn[lid].start_date.date);else var h=new Date;var i=h.getMonth(),j=h.getDate();10>i&&(i="0"+(parseInt(h.getMonth())+1)),10>j&&(j="0"+h.getDate());var k=h.getFullYear()+"-"+i+"-"+j;g+=f?'<input name="'+a+'" class="multiple_fridges_start_date" placeholder="'+c+'" id="frm_label_'+md5(b)+'" type="date" value="'+k+'"/>':'<input name="'+a+'" placeholder="'+c+'" id="frm_label_'+md5(b)+'" type="date" value="'+k+'"/>'}else g+=f?'<input name="'+a+'" class="multiple_fridges_start_date" placeholder="'+c+'" id="frm_label_'+md5(b)+'" type="date" />':'<input name="'+a+'" placeholder="'+c+'" id="frm_label_'+md5(b)+'" type="date" />';return void 0!=d&&d&&(g+="</div>"),g},Form.prototype.multipleTextColor=function(a,b,c){var d="<label>"+b+"</label>",e={Red:"#ff0000",Green:"#008000",Blue:"#0000ff",Yellow:"#ffff00",White:"#ffffff",Pink:"#FF1493",Brown:"#A52A2A"};for(var f in c)if(c.hasOwnProperty(f)){d+='<legend style="margin-top:10px;">'+c[f].answer.label+"</legend>";for(var g in e)e.hasOwnProperty(g)&&(d+="White"==g?'<input name="answer['+f+']" id="'+md5(f+g)+'" type="radio" value="'+e[g]+'" checked="checked">':'<input name="answer['+f+']" id="'+md5(f+g)+'" type="radio" value="'+e[g]+'">',d+='<label for="'+md5(f+g)+'"><i class="fa fa-square" style="color:'+e[g]+';"></i> '+g+"</label>")}return d},Form.prototype.multipleTextColorV=function(a,b,c,d){var e="<label>"+b+"</label>",f={Red:"#ff0000",Green:"#008000",Blue:"#0000ff",Yellow:"#ffff00",White:"#ffffff",Pink:"#FF1493",Brown:"#A52A2A"};for(var g in c)if(c.hasOwnProperty(g)){e+='<legend style="margin-top:10px;">'+c[g].answer.label+"</legend>";for(var h in f)f.hasOwnProperty(h)&&(e+=f[h]==d[g].color?'<input name="answer['+g+']" id="'+md5(g+h)+'" type="radio" value="'+f[h]+'" checked="checked">':'<input name="answer['+g+']" id="'+md5(g+h)+'" type="radio" value="'+f[h]+'">',e+='<label for="'+md5(g+h)+'"><i class="fa fa-square" style="color:'+f[h]+';"></i> '+h+"</label>")}return e},Form.prototype.customStep10=function(a,b,c,d,e){var f="<label>"+b+"</label>";for(var g in e)if(e.hasOwnProperty(g))if(20==g){f+='<input name="answers['+g+']" id="'+md5(a+g)+'" type="checkbox" value="'+g+'" onclick="toggleCustom10(this)">',f+='<label for="'+md5(a+g)+'">'+e[g]+"</label>",f+='<div id="custom_step10" style="display: none;">',f+="<label>How often will you make sushi</label>";for(var g in d)d.hasOwnProperty(g)&&(f+='<input name="frequency_id" id="'+md5(a+g+"f")+'" type="radio" value="'+g+'">',f+='<label for="'+md5(a+g+"f")+'">'+d[g]+"</label>");f+='<label for="frm_label_step10_date">'+$.t("general.start_date")+"</label>",f+='<input name="start_date" placeholder="Choose Date" id="frm_label_step10_date" type="date" />',f+="</div>"}else f+='<input name="answers['+g+']" id="'+md5(a+g)+'" type="checkbox" value="'+g+'">',f+='<label for="'+md5(a+g)+'">'+e[g]+"</label>";return f},Form.prototype.customStep10V=function(a,b,c,d,e,f){var g="<label>"+b+"</label>";for(var h in e)if(e.hasOwnProperty(h))if(20==h){void 0!=f[h]?(g+='<input name="answers['+h+']" id="'+md5(a+h)+'" type="checkbox" value="'+h+'" onclick="toggleCustom10(this)" checked>',g+='<label for="'+md5(a+h)+'">'+e[h]+"</label>",g+='<div id="custom_step10" style="display: block;">'):(g+='<input name="answers['+h+']" id="'+md5(a+h)+'" type="checkbox" value="'+h+'" onclick="toggleCustom10(this)">',g+='<label for="'+md5(a+h)+'">'+e[h]+"</label>",g+='<div id="custom_step10" style="display: none;">'),g+="<label>How often will you make sushi</label>";for(var h in d)d.hasOwnProperty(h)&&(g+='<input name="frequency_id" id="'+md5(a+h+"f")+'" type="radio" value="'+h+'">',g+='<label for="'+md5(a+h+"f")+'">'+d[h]+"</label>");g+='<label for="frm_label_step10_date">'+$.t("general.start_date")+"</label>",g+='<input name="start_date" placeholder="Choose Date" id="frm_label_step10_date" type="date" />',g+="</div>"}else g+=void 0!=f[h]?'<input name="answers['+h+']" id="'+md5(a+h)+'" type="checkbox" value="'+h+'" checked>':'<input name="answers['+h+']" id="'+md5(a+h)+'" type="checkbox" value="'+h+'">',g+='<label for="'+md5(a+h)+'">'+e[h]+"</label>";return g},Form.prototype.inputCancel=function(a){var b='<a data-role="button" data-theme="f" href="'+a+'" data-ajax="false">'+$.t("general.cancel_button")+"</a>";return b},Form.prototype.slider=function(a,b,c,d,e,f){var g='<label for="'+md5(b+a)+'">'+b+"</label>";return g+='<input name="'+a+'" id="'+md5(b+a)+'" min="'+d+'" max="'+e+'" value="'+f+'" type="range">'},Form.prototype.clickIncrement=function(a,b,c,d,e){var f="";return f+="<legend>"+b+"</legend>",f+='<fieldset class="ui-grid-b">',f+='<div class="ui-block-a"><input name="'+a+'" type="text" value="'+(void 0!=e?e:c)+'" readonly="readonly" id="'+md5(a+b)+'" data-min="'+c+'"></div>',f+='<div class="ui-block-b"><button onclick="incClick(\''+md5(a+b)+"', '1');return false;\"><i class=\"fa fa-plus\"></i></button></div>",f+='<div class="ui-block-c"><button onclick="incClick(\''+md5(a+b)+"', '-1');return false;\"><i class=\"fa fa-minus\"></i></button></div>",f+="</fieldset>"};var Form=new Form;$(document).delegate(".ui-page","pagebeforeshow",function(a,b){from_page=b.prevPage.attr("id"),void 0!=$.mobile.activePage.attr("id")&&(Page.init($.mobile.activePage.attr("id")),"register_company"==$.mobile.activePage.attr("id")||"tos"==$.mobile.activePage.attr("id")?$("#"+$.mobile.activePage.attr("id")).find("#global_header").load("_header_register.html",function(){$(this).find("h1").text($.t("page_title."+$.mobile.activePage.attr("id"))),$("#"+$.mobile.activePage.attr("id")).trigger("pagecreate")}):$("#"+$.mobile.activePage.attr("id")).find("#global_header").load("_header.html",function(){$(this).find("h1").text($.t("page_title."+$.mobile.activePage.attr("id"))),"disable"==$("#"+$.mobile.activePage.attr("id")).data("head-buttons")&&$(this).find("a").remove(),$("#"+$.mobile.activePage.attr("id")).trigger("pagecreate")}))}),$(document).on("pagechange",function(a,b){if("ROLE_EMPLOYEE"==localStorage.getItem("role")){var c=localStorage.getItem("user_name");c=c?c.replace(/\+/g," "):"",$("#"+$.mobile.activePage.attr("id")).find("#menu_panel").load("_panel_employee.html",function(){bind_menuClick(this,c),$("#menu_panel").find('a[href^="'+b.toPage[0].id+'"]').addClass("active")})}else{var c=localStorage.getItem("user_name");c=c?c.replace(/\+/g," "):"",$("#"+$.mobile.activePage.attr("id")).find("#menu_panel").load("_panel.html",function(){bind_menuClick(this,c),$("#menu_panel").find('a[href^="'+b.toPage[0].id+'"]').addClass("active")})}});var t0,t1,loadTime=0,offline=!1,lastSynced=0;window.performance=window.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}},$(document).ajaxStart(function(){$(".swiper-slide").addClass("swiper-no-swiping"),"undefined"!=typeof nextSlide&&(nextSlide=!1)}),$(document).ajaxStop(function(){$(".swiper-slide").removeClass("swiper-no-swiping"),"undefined"!=typeof nextSlide&&(nextSlide=!0)});