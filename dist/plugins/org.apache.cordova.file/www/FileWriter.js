cordova.define("org.apache.cordova.file.FileWriter",function(t,e,n){var r=t("cordova/exec"),i=t("./FileError"),o=t("./ProgressEvent"),a=function(t){this.fileName="",this.length=0,t&&(this.fileName=t.fullPath||t,this.length=t.size||0),this.position=0,this.readyState=0,this.result=null,this.error=null,this.onwritestart=null,this.onprogress=null,this.onwrite=null,this.onwriteend=null,this.onabort=null,this.onerror=null};a.INIT=0,a.WRITING=1,a.DONE=2,a.prototype.abort=function(){if(this.readyState===a.DONE||this.readyState===a.INIT)throw new i(i.INVALID_STATE_ERR);this.error=new i(i.ABORT_ERR),this.readyState=a.DONE,"function"==typeof this.onabort&&this.onabort(new o("abort",{target:this})),"function"==typeof this.onwriteend&&this.onwriteend(new o("writeend",{target:this}))},a.prototype.write=function(t){var e,n=this,s="undefined"!=typeof window.Blob&&"undefined"!=typeof window.ArrayBuffer;if(t instanceof File||s&&t instanceof Blob){var w=new FileReader;return w.onload=function(){a.prototype.write.call(n,this.result)},void(s?w.readAsArrayBuffer(t):w.readAsText(t))}if(e=s&&t instanceof ArrayBuffer,this.readyState===a.WRITING)throw new i(i.INVALID_STATE_ERR);this.readyState=a.WRITING;var f=this;"function"==typeof f.onwritestart&&f.onwritestart(new o("writestart",{target:f})),r(function(t){f.readyState!==a.DONE&&(f.position+=t,f.length=f.position,f.readyState=a.DONE,"function"==typeof f.onwrite&&f.onwrite(new o("write",{target:f})),"function"==typeof f.onwriteend&&f.onwriteend(new o("writeend",{target:f})))},function(t){f.readyState!==a.DONE&&(f.readyState=a.DONE,f.error=new i(t),"function"==typeof f.onerror&&f.onerror(new o("error",{target:f})),"function"==typeof f.onwriteend&&f.onwriteend(new o("writeend",{target:f})))},"File","write",[this.fileName,t,this.position,e])},a.prototype.seek=function(t){if(this.readyState===a.WRITING)throw new i(i.INVALID_STATE_ERR);(t||0===t)&&(this.position=0>t?Math.max(t+this.length,0):t>this.length?this.length:t)},a.prototype.truncate=function(t){if(this.readyState===a.WRITING)throw new i(i.INVALID_STATE_ERR);this.readyState=a.WRITING;var e=this;"function"==typeof e.onwritestart&&e.onwritestart(new o("writestart",{target:this})),r(function(t){e.readyState!==a.DONE&&(e.readyState=a.DONE,e.length=t,e.position=Math.min(e.position,t),"function"==typeof e.onwrite&&e.onwrite(new o("write",{target:e})),"function"==typeof e.onwriteend&&e.onwriteend(new o("writeend",{target:e})))},function(t){e.readyState!==a.DONE&&(e.readyState=a.DONE,e.error=new i(t),"function"==typeof e.onerror&&e.onerror(new o("error",{target:e})),"function"==typeof e.onwriteend&&e.onwriteend(new o("writeend",{target:e})))},"File","truncate",[this.fileName,t])},n.exports=a});