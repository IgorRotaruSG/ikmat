function getReportsViewCall(a,b){if(console.log("function getReportsViewCall(tx, results) {"),console.log("ma ce cauti aici?"),b.rows.length>0){var c=$.extend({},b.rows.item(0));if(console.log(c),null==c.html){var d={client:User.client,token:User.lastToken,report_number:get.id,filter_date_from:get.from,filter_date_to:get.to};Page.apiCall("reportTables",d,"get","reportsView")}else console.log(c)}else Page.redirect("reports.html")}function getReportsView(a){a.executeSql('SELECT "html", "link" FROM "reports" WHERE "id"=?',[get.id],getReportsViewCall,db.dbErrorHandle)}function reports_viewInit(){if(User.isLogged()){get=Page.get();var a=db.getDbInstance();a.transaction(getReportsView,db.dbErrorHandle)}else Page.redirect("login.html")}function reportsView(a){var b=a.report_returned;b+="<button onclick=\"window.open('"+a.link+"', '_system');\">Download</button>",$("#raportItem").html(b),$("#"+$.mobile.activePage.attr("id")).trigger("create"),$(".overflow-wrapper").addClass("overflow-wrapper-hide"),$(".report_4_link").off("click").on("click",function(a){a.preventDefault(),Page.redirect("reports_task.html?report="+get.id+"&task_id="+$(this).data("id"))});var c=db.getDbInstance();c.transaction(function(b){b.executeSql('UPDATE "reports" SET "html"=?,"link"=? WHERE "id"=?',[a.report_returned,a.link,get.id],function(a,b){},function(a,b){console.warn(a),console.warn(b)})})}var get;