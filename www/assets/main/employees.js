function getEmployeesCall(a,b){if(0==b.rows.length&&isOffline())$("#employee_no_results").text($.t("error.employee_no_result"));else if(0!=b.rows.length||isOffline()){if(b.rows.length>0){for(var c="",d=0;d<b.rows.length;d++)c+='<li data-role="list-divider">'+b.rows[d].doc.first_name+" "+b.rows[d].doc.last_name+"</li>",c+="<li>"+b.rows[d].doc.email+" "+b.rows[d].doc.role+"</li>";$("#employee_no_results").hide(),$("#employee_list").html(c).listview("refresh")}}else{$("#employee_no_results").text($.t("error.employee_no_result_online"));var e={client:User.client,token:User.lastToken};Page.apiCall("getEmployees",e,"get","getEmployees")}}function employeesInit(){User.isLogged()?db.getDbInstance("employees").allDocs({include_docs:!0},getEmployeesCall):Page.redirect("login.html")}function getEmployees(a){if(a.success&&(User.setToken(a.token),a.employees)){var b="",c='INSERT INTO "employees"("first_name","last_name","email", "role")',d=!1;for(var e in a.employees)"object"==typeof a.employees[e]&&(d?c+=" UNION":d=!0,c+=' SELECT "'+a.employees[e]["First Name"]+'" as "first_name", "'+a.employees[e]["Last Name"]+'" as "last_name", "'+a.employees[e].Email+'" as "email", \''+a.employees[e].Role+'\' as "role"',b+='<li data-role="list-divider">'+a.employees[e]["First Name"]+" "+a.employees[e]["Last Name"]+"</li>",b+="<li>"+a.employees[e].Email+" "+a.employees[e].Role+"</li>");db.clean(),db.execute(c),$("#employee_no_results").hide(),$("#employee_list").html(b).listview("refresh")}}