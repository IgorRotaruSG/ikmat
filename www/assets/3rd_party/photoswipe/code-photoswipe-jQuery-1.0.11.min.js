!function(){if(Function.prototype.bind||(Function.prototype.bind=function(a){var b=[].slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:a||{},c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),"undefined"==typeof Code&&(Code={},Code.PhotoSwipe={}),Code.PhotoSwipe.Util={browser:{version:(navigator.userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],webkit:/webkit/i.test(navigator.userAgent),opera:/opera/i.test(navigator.userAgent),msie:/msie/i.test(navigator.userAgent)&&!/opera/.test(navigator.userAgent),mozilla:/mozilla/i.test(navigator.userAgent)&&!/(compatible|webkit)/.test(navigator.userAgent),mobileSafari:/mobile.*safari/i.test(navigator.userAgent),is3dSupported:!1,isAndroid:/android/i.test(navigator.userAgent),isBlackberry:/blackberry/i.test(navigator.userAgent),isiOS:/like Mac OS/i.test(navigator.userAgent),touchSupported:!1,gestureSupported:!1,_eventTagNames:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},isEventSupported:function(a){var b=document.createElement(this._eventTagNames[a]||"div"),a="on"+a,c=a in b;return c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]),c}},setElementData:function(a,b,c){this.isNothing(a.UtilData)&&(a.UtilData={}),a.UtilData[b]=c},getElementData:function(a,b,c){return"undefined"==typeof c&&(c=null),this.isNothing(a.UtilData)?c:this.isNothing(a.UtilData[b])?c:a.UtilData[b]},removeElementData:function(a,b){delete a.UtilData[b]},coalesce:function(){var a;for(a=0;a<arguments.length;a++)if(!this.isNothing(arguments[a]))return arguments[a];return null},registerNamespace:function(){var a=arguments,b=null,d,e;for(d=0;d<a.length;++d){var c=a[d].split(".");for(e=c[0],eval("if (typeof "+e+' == "undefined"){'+e+" = {};} obj = "+e+";"),e=1;e<c.length;++e)b[c[e]]=b[c[e]]||{},b=b[c[e]]}},extend:function(a,b,c){if(this.isNothing(c)&&(c=!0),a&&b&&this.isObject(b))for(var d in b)c?a[d]=b[d]:"undefined"==typeof a[d]&&(a[d]=b[d])},swapArrayElements:function(a,b,c){var d=a[b];a[b]=a[c],a[c]=d},isObject:function(a){return"object"==typeof a},isNothing:function(a){return"undefined"==typeof a||null===a?!0:!1},isFunction:function(a){return"function"==typeof a},isArray:function(a){return a&&Code.PhotoSwipe.Util.isFunction(a.pop)},isNumber:function(a){return"number"==typeof a},isString:function(a){return"string"==typeof a},trim:function(a){return a.replace(RegExp(/\s+?/),"")}},Code.PhotoSwipe.Util.browser.webkit){var c=document.createElement("div");Code.PhotoSwipe.Util.browser.is3dSupported=!Code.PhotoSwipe.Util.isNothing(c.style.WebkitPerspective)}Code.PhotoSwipe.Util.browser.touchSupported=Code.PhotoSwipe.Util.browser.isEventSupported("touchstart"),Code.PhotoSwipe.Util.browser.gestureSupported=Code.PhotoSwipe.Util.browser.isEventSupported("gesturestart")}(window),function(a,b){b.extend(b,{DOM:{resetTranslate:function(a){b.browser.webkit?b.browser.is3dSupported?$(a).css({webkitTransform:"translate3d(0px, 0px, 0px)"}):$(a).css({webkitTransform:"translate(0px, 0px)"}):$(a).css({webkitTransform:"translate(0px, 0px)",MozTransform:"translate(0px, 0px)",transform:"translate(0px, 0px)"})},createElement:function(a,b,c){return a=$("<"+a+"></"+a+">"),a.attr(b),a.append(c),a[0]},appendChild:function(a,b){$(b).append(a)},appendText:function(a,b){$(b).text(a)},appendToBody:function(a){$("body").append(a)},removeChild:function(a){$(a).empty().remove()},removeChildren:function(a){$(a).empty()},hasAttribute:function(a,c){return b.isNothing($(a).attr(c))},getAttribute:function(a,b){return $(a).attr(b)},setAttribute:function(a,b,c){$(a).attr(b,c)},removeAttribute:function(a,b){$(a).removeAttr(b)},addClass:function(a,b){$(a).addClass(b)},removeClass:function(a,b){$(a).removeClass(b)},hasClass:function(a,b){$(a).hasClass(b)},setStyle:function(a,c,d){b.isObject(c)?$(a).css(c):$(a).css(c,d)},getStyle:function(a,b){return $(a).css(b)},hide:function(a){$(a).hide()},show:function(a){$(a).show()},width:function(a,c){return b.isNothing(c)||$(a).width(c),$(a).width()},outerWidth:function(a){return $(a).outerWidth()},height:function(a,c){return b.isNothing(c)||$(a).height(c),$(a).height()},outerHeight:function(a){return $(a).outerHeight()},documentWidth:function(){return $(document.documentElement).width()},documentHeight:function(){return $(document.documentElement).height()},bodyWidth:function(){return $(document.body).width()},bodyHeight:function(){return $(document.body).height()},windowWidth:function(){return a.innerWidth?a.innerWidth:$(a).width()},windowHeight:function(){return a.innerHeight?a.innerHeight:$(a).height()},windowScrollLeft:function(){return a.pageXOffset?a.pageXOffset:$(a).scrollLeft()},windowScrollTop:function(){return a.pageYOffset?a.pageYOffset:$(a).scrollTop()},addEventListener:function(a,b,c){$(a).bind(b,c)},removeEventListener:function(a,b,c){$(a).unbind(b,c)},getMousePosition:function(a){return{x:a.pageX,y:a.pageY}},getTouchEvent:function(a){return a.originalEvent}}})}(window,Code.PhotoSwipe.Util),function(a,b){b.extend(b,{Animation:{stopFade:function(a){$(a).stop(!0,!0)},fadeIn:function(a,c,d,e){c=b.coalesce(c,1),d=b.coalesce(d,500),$(a).fadeTo(d,c,e)},fadeOut:function(a,c,d){b.isNothing(c)&&(c=500),$(a).fadeTo(c,0,d)},slideBy:function(a,c,d,e,f){b.isNothing(e)&&(e=500),c=jQuery.fn.translation?{left:"+="+c+"px",top:"+="+d+"px",useTranslate3d:b.browser.is3dSupported}:{left:"+="+c+"px",top:"+="+d+"px"},$(a).animate(c,e,f)}}})}(window,Code.PhotoSwipe.Util),function(){Code.PhotoSwipe.EventClass=SimpleClass.extend({_listeners:null,init:function(){this._listeners={}},addEventListener:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},dispatchEvent:function(a){if("string"==typeof a&&(a={type:a}),a.target||(a.target=this),!a.type)throw Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array)for(var b=this._listeners[a.type],c=0,d=b.length;d>c;c++)b[c].call(this,a)},removeEventListener:function(a,b){if(this._listeners[a]instanceof Array)for(var c=this._listeners[a],d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}}})}(),function(a,b){Code.PhotoSwipe.ElementClass=Code.PhotoSwipe.EventClass.extend({el:null,settings:null,isHidden:null,fadeInHandler:null,fadeOutHandler:null,init:function(a){this._super(),this.settings={opacity:1,fadeInSpeed:250,fadeOutSpeed:500},b.extend(this.settings,a),this.fadeInHandler=this.postFadeIn.bind(this),this.fadeOutHandler=this.postFadeOut.bind(this),this.isHidden=!0},resetPosition:function(){},show:function(){this.stopFade(),b.DOM.setStyle(this.el,"opacity",this.settings.opacity),b.DOM.show(this.el),this.postShow()},postShow:function(){this.isHidden=!1,this.addEventListeners(),this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onShow)},fadeIn:function(){b.DOM.setStyle(this.el,"opacity",0),this.fadeInFromCurrentOpacity()},fadeInFromCurrentOpacity:function(){this.stopFade(),this.isHidden=!1,b.DOM.show(this.el),b.Animation.fadeIn(this.el,this.settings.opacity,this.settings.fadeInSpeed,this.fadeInHandler)},postFadeIn:function(){this.isHidden||(this.addEventListeners(),this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onFadeIn))},hide:function(){this.stopFade(),b.DOM.hide(this.el),this.postHide()},postHide:function(){this.isHidden=!0,this.removeEventListeners(),this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onHide)},fadeOut:function(){this.stopFade(),this.isHidden=!0,b.Animation.fadeOut(this.el,this.settings.fadeOutSpeed,this.fadeOutHandler)},postFadeOut:function(){this.isHidden&&(b.DOM.hide(this.el),this.removeEventListeners(),this.dispatchEvent(Code.PhotoSwipe.ElementClass.EventTypes.onFadeOut))},stopFade:function(){b.Animation.stopFade(this.el)},addEventListeners:function(){},removeEventListeners:function(){}}),Code.PhotoSwipe.ElementClass.EventTypes={onShow:"onShow",onHide:"onHide",onClick:"onClick",onFadeIn:"onFadeIn",onFadeOut:"onFadeOut"}}(window,Code.PhotoSwipe.Util),function(a,b){Code.PhotoSwipe.FullSizeImageClass=Code.PhotoSwipe.EventClass.extend({el:null,index:null,naturalWidth:null,naturalHeight:null,src:null,caption:null,metaData:null,scaleMethod:null,isLandscape:null,isLoading:null,hasLoaded:null,loadEventHandler:null,init:function(a,c,d,e,f){this._super(),this.index=a,this.naturalHeight=this.naturalWidth=0,this.src=d,this.caption=e,this.metaData=b.coalesce(f,{}),this.hasLoaded=this.isLoading=this.isLandscape=!1,this.scaleMethod=c,this.loadEventHandler=this.onLoad.bind(this)},load:function(){this.isLoading=!0,this.el=new Image,b.DOM.addClass(this.el,"ps-full-size-image"),this.el.onload=this.loadEventHandler,this.el.src=this.src},onLoad:function(){this.naturalWidth=b.coalesce(this.el.naturalWidth,this.el.width),this.naturalHeight=b.coalesce(this.el.naturalHeight,this.el.height),this.isLandscape=this.naturalWidth>this.naturalHeight,this.isLoading=!1,this.hasLoaded=!0,this.dispatchEvent(Code.PhotoSwipe.FullSizeImageClass.EventTypes.onLoad)}}),Code.PhotoSwipe.FullSizeImageClass.EventTypes={onLoad:"onLoad"}}(window,Code.PhotoSwipe.Util),function(a,b){Code.PhotoSwipe.DocumentOverlayClass=Code.PhotoSwipe.ElementClass.extend({init:function(a){this.settings={zIndex:1e3},b.extend(this.settings,a),this._super(a),this.el=b.DOM.createElement("div",{"class":Code.PhotoSwipe.DocumentOverlayClass.CssClasses.documentOverlay},""),b.DOM.setStyle(this.el,{left:0,position:"absolute",zIndex:this.settings.zIndex,top:0}),b.DOM.hide(this.el),b.DOM.appendToBody(this.el)},resetPosition:function(){b.DOM.width(this.el,b.DOM.bodyWidth()),b.DOM.height(this.el,b.DOM.bodyHeight())}}),Code.PhotoSwipe.DocumentOverlayClass.CssClasses={documentOverlay:"ps-document-overlay"}}(window,Code.PhotoSwipe.Util),function(a,b){Code.PhotoSwipe.ViewportClass=Code.PhotoSwipe.ElementClass.extend({touchStartPoint:null,touchStartTime:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,gestureStartHandler:null,gestureChangeHandler:null,gestureEndHandler:null,isGesture:null,mouseDownHandler:null,mouseUpHandler:null,init:function(a){this.settings={swipeThreshold:500,swipeTimeThreshold:250,zIndex:1e3},b.extend(this.settings,a),this._super(this.settings),this.touchStartPoint={x:0,y:0},b.browser.touchSupported&&(this.touchStartHandler=this.onTouchStart.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.touchEndHandler=this.onTouchEnd.bind(this)),b.browser.gestureSupported&&(this.gestureStartHandler=this.onGestureStart.bind(this),this.gestureChangeHandler=this.onGestureChange.bind(this),this.gestureEndHandler=this.onGestureEnd.bind(this)),this.mouseDownHandler=this.onMouseDown.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this),this.el=b.DOM.createElement("div",{"class":Code.PhotoSwipe.ViewportClass.CssClasses.viewport,"data-role":"dialog"},""),b.DOM.setStyle(this.el,{position:"absolute",left:0,zIndex:this.settings.zIndex,overflow:"hidden"}),b.DOM.hide(this.el),b.DOM.appendToBody(this.el)},resetPosition:function(){b.DOM.setStyle(this.el,{top:b.DOM.windowScrollTop()+"px"}),b.DOM.width(this.el,b.DOM.bodyWidth()),b.DOM.height(this.el,b.DOM.windowHeight())},addEventListeners:function(){b.browser.touchSupported&&(b.DOM.addEventListener(this.el,"touchstart",this.touchStartHandler),b.DOM.addEventListener(this.el,"touchmove",this.touchMoveHandler),b.DOM.addEventListener(this.el,"touchend",this.touchEndHandler)),b.browser.gestureSupported&&(b.DOM.addEventListener(this.el,"gesturestart",this.gestureStartHandler),b.DOM.addEventListener(this.el,"gesturechange",this.gestureChangeHandler),b.DOM.addEventListener(this.el,"gestureend",this.gestureEndHandler)),b.DOM.addEventListener(this.el,"mousedown",this.mouseDownHandler),b.DOM.addEventListener(this.el,"mouseup",this.mouseUpHandler)},removeEventListeners:function(){b.browser.touchSupported&&(b.DOM.removeEventListener(this.el,"touchstart",this.touchStartHandler),b.DOM.removeEventListener(this.el,"touchmove",this.touchMoveHandler),b.DOM.removeEventListener(this.el,"touchend",this.touchEndHandler)),b.browser.gestureSupported&&(b.DOM.removeEventListener(this.el,"gesturestart",this.gestureStartHandler),b.DOM.removeEventListener(this.el,"gesturechange",this.gestureChangeHandler),b.DOM.removeEventListener(this.el,"gestureend",this.gestureEndHandler)),b.DOM.removeEventListener(this.el,"mousedown",this.mouseDownHandler),b.DOM.removeEventListener(this.el,"mouseup",this.mouseUpHandler)},getTouchPoint:function(a){return{x:a[0].pageX,y:a[0].pageY}},onGestureStart:function(a){a.preventDefault(),a=b.DOM.getTouchEvent(a),this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.gestureStart,scale:a.scale,rotation:a.rotation})},onGestureChange:function(a){a.preventDefault(),a=b.DOM.getTouchEvent(a),this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.gestureChange,scale:a.scale,rotation:a.rotation})},onGestureEnd:function(a){a.preventDefault(),a=b.DOM.getTouchEvent(a),this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.gestureEnd,scale:a.scale,rotation:a.rotation})},onTouchStart:function(a){a.preventDefault(),a=b.DOM.getTouchEvent(a).touches,a.length>1?this.isGesture=!0:(this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.touchStart,point:this.getTouchPoint(a)}),this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=this.getTouchPoint(a))},onTouchMove:function(a){a.preventDefault(),this.isGesture||(a=b.DOM.getTouchEvent(a).touches,this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.touchMove,point:this.getTouchPoint(a)}))},onTouchEnd:function(a){a.preventDefault(),this.isGesture||(a=b.DOM.getTouchEvent(a),a=this.getTouchPoint(b.isNothing(a.changedTouches)?a.touches:a.changedTouches),this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:Code.PhotoSwipe.ViewportClass.Actions.touchEnd,point:a}),this.fireTouchEvent(this.touchStartPoint,a))},onMouseDown:function(a){a.preventDefault(),this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=b.DOM.getMousePosition(a)},onMouseUp:function(a){a.preventDefault(),this.fireTouchEvent(this.touchStartPoint,b.DOM.getMousePosition(a))},fireTouchEvent:function(a,c){var d;new Date-this.touchStartTime>this.settings.swipeTimeThreshold||(d=c.x-a.x,d=Math.abs(d)>=this.settings.swipeThreshold?0>d?Code.PhotoSwipe.ViewportClass.Actions.swipeLeft:Code.PhotoSwipe.ViewportClass.Actions.swipeRight:Code.PhotoSwipe.ViewportClass.Actions.click,b.isNothing(d)||this.dispatchEvent({type:Code.PhotoSwipe.ViewportClass.EventTypes.onTouch,target:this,action:d}))}}),Code.PhotoSwipe.ViewportClass.CssClasses={viewport:"ps-viewport"},Code.PhotoSwipe.ViewportClass.Actions={click:"click",swipeLeft:"swipeLeft",swipeRight:"swipeRight",touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",gestureStart:"gestureStart",gestureChange:"gestureChange",gestureEnd:"gestureEnd"},Code.PhotoSwipe.ViewportClass.EventTypes={onTouch:"onTouch"}}(window,Code.PhotoSwipe.Util),function(a,b,c){Code.PhotoSwipe.SliderItemClass=Code.PhotoSwipe.EventClass.extend({el:null,imageContainerEl:null,imageEl:null,parentEl:null,fullSizeImage:null,fullSizeImageLoadEventHandler:null,savedImageWidth:null,savedImageHeight:null,init:function(a){this._super(),this.parentEl=a,this.fullSizeImageLoadEventHandler=this.onFullSizeImageLoad.bind(this),this.el=b.DOM.createElement("div",{"class":Code.PhotoSwipe.SliderItemClass.CssClasses.item+" "+Code.PhotoSwipe.SliderItemClass.CssClasses.loading},""),b.DOM.setStyle(this.el,{position:"absolute",overflow:"hidden",top:0}),b.DOM.resetTranslate(this.el),b.DOM.appendChild(this.el,this.parentEl),this.imageContainerEl=b.DOM.createElement("div"),b.DOM.setStyle(this.imageContainerEl,{position:"absolute",overflow:"hidden",top:0,left:0}),b.DOM.appendChild(this.imageContainerEl,this.el),this.imageEl=new Image,b.DOM.setStyle(this.imageEl,{display:"block",position:"absolute",margin:0,padding:0}),b.DOM.hide(this.imageEl),b.DOM.appendChild(this.imageEl,this.imageContainerEl)},resetPosition:function(a,c,d){b.DOM.width(this.el,a),b.DOM.height(this.el,c),b.DOM.setStyle(this.el,"left",d+"px"),b.DOM.width(this.imageContainerEl,a),b.DOM.height(this.imageContainerEl,c),this.resetImagePosition()},resetImagePosition:function(){if(!b.isNothing(this.fullSizeImage)){b.DOM.getAttribute(this.imageEl,"src");var a,c,d,e;e=b.DOM.width(this.el);var f=b.DOM.height(this.el);a=this.fullSizeImage.isLandscape?e/this.fullSizeImage.naturalWidth:f/this.fullSizeImage.naturalHeight,c=Math.round(this.fullSizeImage.naturalWidth*a),d=Math.round(this.fullSizeImage.naturalHeight*a),"zoom"===this.fullSizeImage.scaleMethod?(a=1,f>d?a=f/d:e>c&&(a=e/c),1!==a&&(c=Math.round(c*a),d=Math.round(d*a))):"fit"===this.fullSizeImage.scaleMethod&&(a=1,c>e?a=e/c:d>f&&(a=f/d),1!==a&&(c=Math.round(c*a),d=Math.round(d*a))),a=(f-d)/2+"px",e=(e-c)/2+"px",b.DOM.width(this.imageEl,c),b.DOM.height(this.imageEl,d),b.DOM.setStyle(this.imageEl,{top:a,left:e}),b.DOM.show(this.imageEl),this.savedImageWidth=c,this.savedImageHeight=d}},setFullSizeImage:function(a){this.fullSizeImage=a,b.DOM.removeClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.loading),b.DOM.removeClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.imageError),b.isNothing(this.fullSizeImage)?(this.fullSizeImage=null,b.DOM.addClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.imageError),this.hideImage()):this.fullSizeImage.hasLoaded?(b.DOM.setAttribute(this.imageEl,"src",this.fullSizeImage.src),this.resetImagePosition(),this.dispatchEvent(Code.PhotoSwipe.SliderItemClass.EventTypes.onFullSizeImageDisplay)):(b.DOM.addClass(this.el,Code.PhotoSwipe.SliderItemClass.CssClasses.loading),this.hideImage(),this.fullSizeImage.isLoading||(this.fullSizeImage.addEventListener(c.EventTypes.onLoad,this.fullSizeImageLoadEventHandler),this.fullSizeImage.load()))},onFullSizeImageLoad:function(a){a.target.removeEventListener(c.EventTypes.onLoad,this.fullSizeImageLoadEventHandler),b.isNothing(this.fullSizeImage)||a.target.index!==this.fullSizeImage.index?this.dispatchEvent({type:Code.PhotoSwipe.SliderItemClass.EventTypes.onFullSizeImageLoadAnomaly,target:this,fullSizeImage:a.target}):this.setFullSizeImage(a.target)},hideImage:function(){b.DOM.removeAttribute(this.imageEl,"src"),b.DOM.hide(this.imageEl)}}),Code.PhotoSwipe.SliderItemClass.CssClasses={item:"ps-slider-item",loading:"ps-slider-item-loading",imageError:"ps-slider-item-image-error"},Code.PhotoSwipe.SliderItemClass.EventTypes={onFullSizeImageDisplay:"onFullSizeImageDisplay",onFullSizeImageLoadAnomaly:"onFullSizeImageLoadAnomaly"}}(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.FullSizeImageClass),function(a,b,c){Code.PhotoSwipe.SliderClass=Code.PhotoSwipe.ElementClass.extend({parentEl:null,parentElWidth:null,parentElHeight:null,items:null,scaleEl:null,lastScaleValue:null,previousItem:null,currentItem:null,nextItem:null,hasBounced:null,lastShowAction:null,bounceSlideBy:null,showNextEndEventHandler:null,showPreviousEndEventHandler:null,bounceStepOneEventHandler:null,bounceStepTwoEventHandler:null,sliderFullSizeImageLoadAnomalyEventHandler:null,init:function(a,d){this.settings={slideSpeed:250},b.extend(this.settings,a),this._super(this.settings),this.parentEl=d,this.hasBounced=!1,this.showNextEndEventHandler=this.onShowNextEnd.bind(this),this.showPreviousEndEventHandler=this.onShowPreviousEnd.bind(this),this.bounceStepOneEventHandler=this.onBounceStepOne.bind(this),this.bounceStepTwoEventHandler=this.onBounceStepTwo.bind(this),this.sliderFullSizeImageLoadAnomalyEventHandler=this.onSliderFullSizeImageLoadAnomaly.bind(this),this.el=b.DOM.createElement("div",{"class":Code.PhotoSwipe.SliderClass.CssClasses.slider},""),b.DOM.setStyle(this.el,{position:"absolute",top:0}),b.DOM.hide(this.el),b.DOM.appendChild(this.el,d),this.items=[],this.items.push(new c(this.el)),this.items.push(new c(this.el)),this.items.push(new c(this.el)),this.previousItem=this.items[0],this.currentItem=this.items[1],this.nextItem=this.items[2]},addEventListeners:function(){for(var a=0;a<this.items.length;a++)this.items[a].addEventListener(c.EventTypes.onFullSizeImageLoadAnomaly,this.sliderFullSizeImageLoadAnomalyEventHandler)},removeEventListeners:function(){for(var a=0;a<this.items.length;a++)this.items[a].removeEventListener(c.EventTypes.onFullSizeImageLoadAnomaly,this.sliderFullSizeImageLoadAnomalyEventHandler)},resetPosition:function(){b.DOM.show(this.currentItem.imageContainerEl),this.parentElWidth=b.DOM.width(this.parentEl),this.parentElHeight=b.DOM.height(this.parentEl),b.DOM.width(this.el,3*this.parentElWidth),b.DOM.height(this.el,this.parentElHeight),this.previousItem.resetPosition(this.parentElWidth,this.parentElHeight,0),this.currentItem.resetPosition(this.parentElWidth,this.parentElHeight,this.parentElWidth),this.nextItem.resetPosition(this.parentElWidth,this.parentElHeight,2*this.parentElWidth),this.center()},center:function(){b.DOM.resetTranslate(this.el),b.DOM.setStyle(this.el,{left:-1*this.parentElWidth+"px"})},setCurrentFullSizeImage:function(a){this.currentItem.setFullSizeImage(a),this.dispatchDisplayCurrentFullSizeImage()},setPreviousAndNextFullSizeImages:function(a,b){this.nextItem.setFullSizeImage(b),this.previousItem.setFullSizeImage(a)},showNext:function(){this.lastShowAction=Code.PhotoSwipe.SliderClass.ShowActionTypes.next,this.hasBounced=!1,b.isNothing(this.nextItem.fullSizeImage)?this.bounce():b.Animation.slideBy(this.el,-1*this.parentElWidth,0,this.settings.slideSpeed,this.showNextEndEventHandler)},showPrevious:function(){this.lastShowAction=Code.PhotoSwipe.SliderClass.ShowActionTypes.previous,this.hasBounced=!1,b.isNothing(this.previousItem.fullSizeImage)?this.bounce():b.Animation.slideBy(this.el,this.parentElWidth,0,this.settings.slideSpeed,this.showPreviousEndEventHandler)},bounce:function(){b.DOM.show(this.currentItem.imageContainerEl),this.hasBounced=!0,this.bounceSlideBy=this.parentElWidth/2,b.Animation.slideBy(this.el,this.lastShowAction===Code.PhotoSwipe.SliderClass.ShowActionTypes.previous?this.bounceSlideBy:-1*this.bounceSlideBy,0,this.settings.slideSpeed,this.bounceStepOneEventHandler)},onBounceStepOne:function(){b.Animation.slideBy(this.el,this.lastShowAction===Code.PhotoSwipe.SliderClass.ShowActionTypes.previous?-1*this.bounceSlideBy:this.bounceSlideBy,0,this.settings.slideSpeed,this.bounceStepTwoEventHandler)},onBounceStepTwo:function(){this.dispatchDisplayCurrentFullSizeImage()},onShowNextEnd:function(){b.DOM.show(this.currentItem.imageContainerEl),b.swapArrayElements(this.items,1,2),this.currentItem=this.items[1],this.nextItem=this.items[2];var a=this.parentElWidth;b.DOM.setStyle(this.currentItem.el,"left",a+"px"),b.DOM.setStyle(this.nextItem.el,"left",2*a+"px"),this.center(),this.dispatchDisplayCurrentFullSizeImage()},onShowPreviousEnd:function(){b.DOM.show(this.currentItem.imageContainerEl),b.swapArrayElements(this.items,1,0),this.currentItem=this.items[1],this.previousItem=this.items[0],b.DOM.setStyle(this.currentItem.el,"left",this.parentElWidth+"px"),b.DOM.setStyle(this.previousItem.el,"left","0px"),this.center(),this.dispatchDisplayCurrentFullSizeImage()},onSliderFullSizeImageLoadAnomaly:function(a){a=a.fullSizeImage,b.isNothing(this.currentItem.fullSizeImage)||this.currentItem.fullSizeImage.index!==a.index?b.isNothing(this.nextItem.fullSizeImage)||this.nextItem.fullSizeImage.index!==a.index?b.isNothing(this.previousItem.fullSizeImage)||this.previousItem.fullSizeImage.index===a.index&&this.previousItem.setFullSizeImage(a):this.nextItem.setFullSizeImage(a):(this.currentItem.setFullSizeImage(a),this.dispatchDisplayCurrentFullSizeImage())},dispatchDisplayCurrentFullSizeImage:function(){this.dispatchEvent({type:Code.PhotoSwipe.SliderClass.EventTypes.onDisplayCurrentFullSizeImage,target:this,fullSizeImage:this.currentItem.fullSizeImage})}}),Code.PhotoSwipe.SliderClass.CssClasses={slider:"ps-slider"},Code.PhotoSwipe.SliderClass.ShowActionTypes={next:"next",previous:"previous"},Code.PhotoSwipe.SliderClass.EventTypes={onDisplayCurrentFullSizeImage:"onDisplayCurrentFullSizeImage"}}(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.SliderItemClass),function(a,b){Code.PhotoSwipe.CaptionClass=Code.PhotoSwipe.ElementClass.extend({contentEl:null,touchMoveHandler:null,captionValue:null,init:function(a){this.settings={position:"top",zIndex:1e3},b.extend(this.settings,a),this._super(this.settings),this.captionValue="",this.touchMoveHandler=this.onTouchMove.bind(this),a=Code.PhotoSwipe.CaptionClass.CssClasses.caption,"bottom"===this.settings.position&&(a=a+" "+Code.PhotoSwipe.CaptionClass.CssClasses.bottom),this.el=b.DOM.createElement("div",{"class":a},""),b.DOM.setStyle(this.el,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex,opacity:0}),b.DOM.hide(this.el),b.DOM.appendToBody(this.el),this.contentEl=b.DOM.createElement("div",{"class":Code.PhotoSwipe.CaptionClass.CssClasses.content},""),b.DOM.appendChild(this.contentEl,this.el)},addEventListeners:function(){b.browser.touchSupported&&b.DOM.addEventListener(this.el,"touchmove",this.touchMoveHandler)},removeEventListeners:function(){b.browser.touchSupported&&b.DOM.removeEventListener(this.el,"touchmove",this.touchMoveHandler)},onTouchMove:function(a){a.preventDefault()},resetPosition:function(){var a;a="bottom"===this.settings.position?b.DOM.windowHeight()-b.DOM.outerHeight(this.el)+b.DOM.windowScrollTop():b.DOM.windowScrollTop(),b.DOM.setStyle(this.el,"top",a+"px"),b.DOM.width(this.el,b.DOM.bodyWidth())},setCaptionValue:function(a){b.DOM.removeChildren(this.contentEl),a=b.coalesce(a," "),b.isObject(a)?b.DOM.appendChild(a,this.contentEl):(""===a&&(a=" "),b.DOM.appendText(a,this.contentEl)),this.captionValue=" "===a?"":a}}),Code.PhotoSwipe.CaptionClass.CssClasses={caption:"ps-caption",bottom:"ps-caption-bottom",content:"ps-caption-content"}}(window,Code.PhotoSwipe.Util),function(a,b){Code.PhotoSwipe.ToolbarClass=Code.PhotoSwipe.ElementClass.extend({closeEl:null,previousEl:null,nextEl:null,playEl:null,clickHandler:null,touchStartHandler:null,touchMoveHandler:null,touched:null,isNextActive:null,isPreviousActive:null,init:function(a){this.settings={position:"bottom",hideClose:!1,zIndex:1e3},b.extend(this.settings,a),this._super(this.settings),this.isPreviousActive=this.isNextActive=!0,this.touched=!1,this.clickHandler=this.onClick.bind(this),b.browser.touchSupported&&(this.touchMoveHandler=this.onTouchMove.bind(this),this.touchStartHandler=this.onTouchStart.bind(this)),a=Code.PhotoSwipe.ToolbarClass.CssClasses.caption,"top"===this.settings.position&&(a=a+" "+Code.PhotoSwipe.ToolbarClass.CssClasses.top),this.el=b.DOM.createElement("div",{"class":a},""),b.DOM.setStyle(this.el,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex,display:"table",opacity:0}),b.DOM.hide(this.el),b.DOM.appendToBody(this.el),this.closeEl=b.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.close},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>'),this.settings.hideClose&&b.DOM.hide(this.closeEl),b.DOM.appendChild(this.closeEl,this.el),this.playEl=b.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.play},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>'),b.DOM.appendChild(this.playEl,this.el),this.previousEl=b.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.previous},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>'),b.DOM.appendChild(this.previousEl,this.el),this.nextEl=b.DOM.createElement("div",{"class":Code.PhotoSwipe.ToolbarClass.CssClasses.next},'<div class="'+Code.PhotoSwipe.ToolbarClass.CssClasses.content+'"></div>'),b.DOM.appendChild(this.nextEl,this.el)},postFadeIn:function(){this.isHidden||(b.DOM.setStyle(this.el,{display:"table"}),this._super(this.settings))},addEventListeners:function(){b.browser.touchSupported&&(b.browser.isBlackberry||b.DOM.addEventListener(this.el,"touchstart",this.touchStartHandler),b.DOM.addEventListener(this.el,"touchmove",this.touchMoveHandler)),b.DOM.addEventListener(this.el,"click",this.clickHandler)},removeEventListeners:function(){b.browser.touchSupported&&(b.browser.isBlackberry||b.DOM.removeEventListener(this.el,"touchstart",this.touchStartHandler),b.DOM.removeEventListener(this.el,"touchmove",this.touchMoveHandler)),b.DOM.removeEventListener(this.el,"click",this.clickHandler)},onTouchStart:function(a){a.preventDefault(),this.touched=!0,this.handleClick(a)},onTouchMove:function(a){a.preventDefault()},onClick:function(a){this.touched||this.handleClick(a)},handleClick:function(a){var c;switch(a.target.parentNode){case this.previousEl:this.isPreviousActive&&(c=Code.PhotoSwipe.ToolbarClass.Actions.previous);break;case this.nextEl:this.isNextActive&&(c=Code.PhotoSwipe.ToolbarClass.Actions.next);break;case this.playEl:c=Code.PhotoSwipe.ToolbarClass.Actions.play;break;case this.closeEl:c=Code.PhotoSwipe.ToolbarClass.Actions.close}b.isNothing(c)||this.dispatchEvent({type:Code.PhotoSwipe.ToolbarClass.EventTypes.onClick,target:this,action:c})},resetPosition:function(){var a;a="bottom"===this.settings.position?b.DOM.windowHeight()-b.DOM.outerHeight(this.el)+b.DOM.windowScrollTop():b.DOM.windowScrollTop(),b.DOM.setStyle(this.el,"top",a+"px"),b.DOM.width(this.el,b.DOM.bodyWidth())},setNextState:function(a){a?(b.DOM.addClass(this.nextEl,Code.PhotoSwipe.ToolbarClass.CssClasses.nextDisabled),this.isNextActive=!1):(b.DOM.removeClass(this.nextEl,Code.PhotoSwipe.ToolbarClass.CssClasses.nextDisabled),this.isNextActive=!0)},setPreviousState:function(a){a?(b.DOM.addClass(this.previousEl,Code.PhotoSwipe.ToolbarClass.CssClasses.previousDisabled),this.isPreviousActive=!1):(b.DOM.removeClass(this.previousEl,Code.PhotoSwipe.ToolbarClass.CssClasses.previousDisabled),this.isPreviousActive=!0)}}),Code.PhotoSwipe.ToolbarClass.CssClasses={caption:"ps-toolbar",top:"ps-toolbar-top",close:"ps-toolbar-close",previous:"ps-toolbar-previous",previousDisabled:"ps-toolbar-previous-disabled",next:"ps-toolbar-next",nextDisabled:"ps-toolbar-next-disabled",play:"ps-toolbar-play",content:"ps-toolbar-content"},Code.PhotoSwipe.ToolbarClass.Actions={close:"close",previous:"previous",next:"next",play:"play"},Code.PhotoSwipe.ToolbarClass.EventTypes={onClick:"onClick"}}(window,Code.PhotoSwipe.Util),function(a,b,c,d){Code.PhotoSwipe.CaptionToolbarClass=Code.PhotoSwipe.EventClass.extend({toolbar:null,caption:null,isHidden:null,hasAddedEventListeners:null,toolbarClickEventHandler:null,init:function(a){this._super(),this.settings={opacity:.8,fadeInSpeed:250,fadeOutSpeed:500,autoHideDelay:5e3,flipPosition:!1,showEmptyCaptions:!0,hideClose:!1,zIndex:1e3},b.extend(this.settings,a),this.isHidden=!0,this.hasAddedEventListeners=!1,this.toolbarClickEventHandler=this.onToolbarClick.bind(this),this.caption=new c({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,opacity:this.settings.opacity,position:this.settings.flipPosition?"bottom":"top",zIndex:this.settings.zIndex}),this.toolbar=new d({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,opacity:this.settings.opacity,position:this.settings.flipPosition?"top":"bottom",hideClose:this.settings.hideClose,zIndex:this.settings.zIndex+1})},resetPosition:function(){this.caption.resetPosition(),this.toolbar.resetPosition()},addEventListeners:function(){this.hasAddedEventListeners||(this.toolbar.addEventListener(d.EventTypes.onClick,this.toolbarClickEventHandler),this.hasAddedEventListeners=!0)},removeEventListeners:function(){this.toolbar.removeEventListener(d.EventTypes.onClick,this.toolbarClickEventHandler),this.hasAddedEventListeners=!1},fadeIn:function(){this.stopAutoHideTimeout(),this.stopFade(),this.isHidden?(this.isHidden=!1,
this.fadeInCaption(),this.toolbar.fadeIn(),a.setTimeout(this.onFadeIn.bind(this),this.settings.fadeInSpeed)):(this.caption.isHidden&&this.fadeInCaption(),this.resetAutoHideTimeout())},showCaption:function(){""===this.caption.captionValue?this.settings.showEmptyCaptions&&this.caption.show():this.caption.show()},fadeInCaption:function(){""===this.caption.captionValue?this.settings.showEmptyCaptions&&this.caption.fadeIn():this.caption.fadeIn()},onFadeIn:function(){this.addEventListeners(),this.resetAutoHideTimeout()},fadeOut:function(){this.stopAutoHideTimeout(),this.stopFade(),this.isHidden=!0,this.caption.fadeOut(),this.toolbar.fadeOut(),a.setTimeout(this.onFadeOut.bind(this),this.settings.fadeOutSpeed)},onFadeOut:function(){},stopFade:function(){this.caption.stopFade(),this.toolbar.stopFade()},hide:function(){this.stopAutoHideTimeout(),this.stopFade(),this.isHidden=!0,this.removeEventListeners(),this.caption.hide(),this.toolbar.hide()},setCaptionValue:function(a){this.caption.setCaptionValue(a),""===this.caption.captionValue&&!this.settings.showEmptyCaptions&&this.caption.fadeOut()},resetAutoHideTimeout:function(){!this.isHidden&&(this.stopAutoHideTimeout(),this.settings.autoHideDelay>0)&&(this.autoHideTimeout=a.setTimeout(this.fadeOut.bind(this),this.settings.autoHideDelay))},stopAutoHideTimeout:function(){b.isNothing(this.autoHideTimeout)||a.clearTimeout(this.autoHideTimeout)},onToolbarClick:function(a){this.dispatchEvent({type:Code.PhotoSwipe.ToolbarClass.EventTypes.onClick,target:this,action:a.action})},setNextState:function(a){this.toolbar.setNextState(a)},setPreviousState:function(a){this.toolbar.setPreviousState(a)}})}(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.CaptionClass,Code.PhotoSwipe.ToolbarClass),function(a,b){Code.PhotoSwipe.ZoomPanRotateClass=Code.PhotoSwipe.ElementClass.extend({containerEl:null,imageEl:null,parentEl:null,transformSettings:null,panStartingPoint:null,init:function(a,c,d){this.settings={maxZoom:5,minZoom:.5,adjustPanToZoom:!0},b.extend(this.settings,a),this._super(a),this.parentEl=c,this.imageEl=d.cloneNode(!1),this.transformSettings={startingScale:1,scale:1,startingRotation:0,rotation:0,startingTranslateX:0,startingTranslateY:0,translateX:0,translateY:0},this.el=b.DOM.createElement("div",{"class":Code.PhotoSwipe.ZoomPanRotateClass.CssClasses.documentOverlay},""),b.DOM.setStyle(this.el,{left:0,top:0,position:"absolute"}),b.DOM.width(this.el,b.DOM.bodyWidth()),b.DOM.height(this.el,b.DOM.windowHeight()),this.containerEl=b.DOM.createElement("div"),b.DOM.setStyle(this.containerEl,{left:0,top:0,position:"absolute"}),b.DOM.width(this.containerEl,b.DOM.bodyWidth()),b.DOM.height(this.containerEl,b.DOM.windowHeight()),b.DOM.appendChild(this.imageEl,this.containerEl),b.DOM.appendChild(this.containerEl,this.el),b.DOM.appendChild(this.el,this.parentEl)},setStartingTranslateFromCurrentTranform:function(){var c=this.containerEl.style.webkitTransform.match(/translate\((.*?)\)/);b.isNothing(c)||(c=c[1].split(", "),this.transformSettings.startingTranslateX=a.parseInt(c[0]),this.transformSettings.startingTranslateY=a.parseInt(c[1]))},setStartingScaleAndRotation:function(a,b){var c=this.transformSettings.startingScale*a;0!==this.settings.minZoom&&c<this.settings.minZoom?c=this.settings.minZoom:0!==this.settings.maxZoom&&c>this.settings.maxZoom&&(c=this.settings.maxZoom),this.transformSettings.startingScale=c,this.transformSettings.startingRotation=(this.transformSettings.startingRotation+b)%360},zoomRotate:function(a,b){var c=this.transformSettings.startingScale*a;0!==this.settings.minZoom&&c<this.settings.minZoom?c=this.settings.minZoom:0!==this.settings.maxZoom&&c>this.settings.maxZoom&&(c=this.settings.maxZoom),this.transformSettings.scale=c,this.transformSettings.rotation=this.transformSettings.startingRotation+b,this.applyTransform()},panStart:function(a){this.setStartingTranslateFromCurrentTranform(),this.panStartingPoint={x:a.x,y:a.y}},pan:function(a){var b=a.x-this.panStartingPoint.x,a=a.y-this.panStartingPoint.y,a=a/this.transformSettings.scale?a/this.transformSettings.scale:a;this.transformSettings.translateX=this.transformSettings.startingTranslateX+(this.settings.adjustPanToZoom?b/this.transformSettings.scale:b),this.transformSettings.translateY=this.transformSettings.startingTranslateY+a,this.applyTransform()},applyTransform:function(){this.containerEl.style.webkitTransform="scale("+this.transformSettings.scale+") rotate("+this.transformSettings.rotation%360+"deg) translate("+this.transformSettings.translateX+"px, "+this.transformSettings.translateY+"px)"},removeFromDOM:function(){b.DOM.removeChild(this.el,this.parentEl)}}),Code.PhotoSwipe.ZoomPanRotateClass.CssClasses={documentOverlay:"ps-zoom-pan-rotate"}}(window,Code.PhotoSwipe.Util),function(a,b,c,d,e,f,g,h,i,j,k){h=Code.PhotoSwipe.EventClass.extend({fullSizeImages:null,documentOverlay:null,viewport:null,slider:null,captionAndToolbar:null,zoomPanRotate:null,settings:null,currentIndex:null,isBusy:null,isActive:null,currentHistoryHashValue:null,isBackEventSupported:null,slideshowTimeout:null,isSlideshowActive:null,lastShowPrevTrigger:null,backButtonClicked:null,viewportFadeInEventHandler:null,windowOrientationChangeEventHandler:null,windowScrollEventHandler:null,windowHashChangeHandler:null,keyDownEventHandler:null,viewportTouchEventHandler:null,viewportFadeOutEventHandler:null,sliderDisplayCurrentFullSizeImageEventHandler:null,toolbarClickEventHandler:null,orientationEventName:null,init:function(){this._super(),this.currentIndex=0,this.backButtonClicked=this.isSlideshowActive=this.isActive=this.isBusy=!1,this.settings={getImageSource:Code.PhotoSwipe.GetImageSource,getImageCaption:Code.PhotoSwipe.GetImageCaption,getImageMetaData:Code.PhotoSwipe.GetImageMetaData,fadeInSpeed:250,fadeOutSpeed:500,slideSpeed:250,swipeThreshold:50,swipeTimeThreshold:250,loop:!0,slideshowDelay:3e3,imageScaleMethod:"fit",preventHide:!1,zIndex:1e3,backButtonHideEnabled:!0,jQueryMobile:!b.isNothing(a.jQuery)&&!b.isNothing(a.jQuery.mobile),jQueryMobileDialogHash:"&ui-state=dialog",allowUserZoom:!0,allowRotationOnUserZoom:!0,maxUserZoom:5,minUserZoom:.5,adjustUserPanToZoom:!0,captionAndToolbarHide:!1,captionAndToolbarHideOnSwipe:!0,captionAndToolbarFlipPosition:!1,captionAndToolbarAutoHideDelay:5e3,captionAndToolbarOpacity:.8,captionAndToolbarShowEmptyCaptions:!0},b.browser.isAndroid&&navigator.userAgent.indexOf("2.1")&&(this.isBackEventSupported=!0),this.isBackEventSupported||(this.isBackEventSupported="onhashchange"in a),this.settings.preventHide&&(this.settings.backButtonHideEnabled=!1),this.viewportFadeInEventHandler=this.onViewportFadeIn.bind(this),this.windowOrientationChangeEventHandler=this.onWindowOrientationChange.bind(this),this.windowScrollEventHandler=this.onWindowScroll.bind(this),this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.keyDownEventHandler=this.onKeyDown.bind(this),this.viewportTouchEventHandler=this.onViewportTouch.bind(this),this.viewportFadeOutEventHandler=this.onViewportFadeOut.bind(this),this.sliderDisplayCurrentFullSizeImageEventHandler=this.onSliderDisplayCurrentFullSizeImage.bind(this),this.toolbarClickEventHandler=this.onToolbarClick.bind(this)},setOptions:function(a){b.extend(this.settings,a),this.settings.preventHide&&(this.settings.backButtonHideEnabled=!1)},setImages:function(a){if(!b.isArray)throw"thumbEls is not an array";this.currentIndex=0,this.fullSizeImages=[];for(var c=0;c<a.length;c++){var d=a[c];this.fullSizeImages.push(new e(c,this.settings.imageScaleMethod,this.settings.getImageSource(d),this.settings.getImageCaption(d),this.settings.getImageMetaData(d)))}},show:function(d){if(!this.isBusy&&!this.isActive){if(!b.isNumber(d))throw"startingIndex must be a number";if(b.isNothing(this.fullSizeImages))throw"need to set images before showing the gallery";this.backButtonClicked=!1,this.isBusy=this.isActive=!0,this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.show,b.DOM.addClass(document.body,Code.PhotoSwipe.CssClasses.activeBody),d=a.parseInt(d),(0>d||d>=this.fullSizeImages.length)&&(d=0),this.currentIndex=d,b.isNothing(this.documentOverlay)?this.build():this.resetPosition(),this.viewport.addEventListener(c.EventTypes.onFadeIn,this.viewportFadeInEventHandler),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeShow),this.viewport.fadeIn()}},build:function(){this.documentOverlay=new d({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,zIndex:this.settings.zIndex}),this.viewport=new f({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,swipeThreshold:this.settings.swipeThreshold,swipeTimeThreshold:this.settings.swipeTimeThreshold,zIndex:this.settings.zIndex+1}),this.slider=new g({fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,slideSpeed:this.settings.slideSpeed},this.viewport.el),this.captionAndToolbar=new j({opacity:this.settings.captionAndToolbarOpacity,fadeInSpeed:this.settings.fadeInSpeed,fadeOutSpeed:this.settings.fadeOutSpeed,autoHideDelay:this.settings.captionAndToolbarAutoHideDelay,flipPosition:this.settings.captionAndToolbarFlipPosition,showEmptyCaptions:this.settings.captionAndToolbarShowEmptyCaptions,hideClose:this.settings.preventHide,zIndex:this.settings.zIndex+3}),this.resetPosition()},addEventListeners:function(){this.orientationEventName=b.browser.isAndroid?"resize":"onorientationchange"in a?"orientationchange":"resize",b.DOM.addEventListener(a,this.orientationEventName,this.windowOrientationChangeEventHandler),b.DOM.addEventListener(a,"scroll",this.windowScrollEventHandler),this.isBackEventSupported&&this.settings.backButtonHideEnabled&&(this.settings.jQueryMobile?a.location.hash=this.settings.jQueryMobileDialogHash:(this.currentHistoryHashValue="PhotoSwipe"+(new Date).getTime().toString(),a.location.hash=this.currentHistoryHashValue),b.DOM.addEventListener(a,"hashchange",this.windowHashChangeHandler)),b.DOM.addEventListener(document,"keydown",this.keyDownEventHandler),this.viewport.addEventListener(f.EventTypes.onTouch,this.viewportTouchEventHandler),this.slider.addEventListener(g.EventTypes.onDisplayCurrentFullSizeImage,this.sliderDisplayCurrentFullSizeImageEventHandler),this.captionAndToolbar.addEventListener(i.EventTypes.onClick,this.toolbarClickEventHandler)},removeEventListeners:function(){b.DOM.removeEventListener(a,this.orientationEventName,this.windowOrientationChangeEventHandler),b.DOM.removeEventListener(a,"scroll",this.windowScrollEventHandler),this.isBackEventSupported&&this.settings.backButtonHideEnabled&&b.DOM.removeEventListener(a,"hashchange",this.windowHashChangeHandler),b.DOM.removeEventListener(document,"keydown",this.keyDownEventHandler),this.viewport.removeEventListener(f.EventTypes.onTouch,this.viewportTouchEventHandler),this.slider.removeEventListener(g.EventTypes.onDisplayCurrentFullSizeImage,this.sliderDisplayCurrentFullSizeImageEventHandler),this.captionAndToolbar.removeEventListener(i.EventTypes.onClick,this.toolbarClickEventHandler)},onViewportFadeIn:function(){this.viewport.removeEventListener(c.EventTypes.onFadeIn,this.viewportFadeInEventHandler),this.documentOverlay.show(),this.slider.fadeIn(),this.addEventListeners(),this.slider.setCurrentFullSizeImage(this.fullSizeImages[this.currentIndex]),this.isBusy=!1,this.dispatchEvent(Code.PhotoSwipe.EventTypes.onShow)},setSliderPreviousAndNextFullSizeImages:function(){var a,b=null,c=null;this.fullSizeImages.length>1&&(a=this.fullSizeImages.length-1,this.currentIndex===a?(this.settings.loop&&(c=this.fullSizeImages[0]),b=this.fullSizeImages[this.currentIndex-1]):0===this.currentIndex?(c=this.fullSizeImages[this.currentIndex+1],this.settings.loop&&(b=this.fullSizeImages[a])):(c=this.fullSizeImages[this.currentIndex+1],b=this.fullSizeImages[this.currentIndex-1])),this.slider.setPreviousAndNextFullSizeImages(b,c)},onKeyDown:function(a){this.stopSlideshow(),37===a.keyCode?(a.preventDefault(),this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.keyboard,this.showPrevious()):39===a.keyCode?(a.preventDefault(),this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.keyboard,this.showNext()):38===a.keyCode||40===a.keyCode?a.preventDefault():27===a.keyCode?(a.preventDefault(),this.hide()):32===a.keyCode&&(this.settings.hideToolbar?this.hide():this.toggleCaptionAndToolbar(),a.preventDefault())},onWindowOrientationChange:function(){this.resetPosition()},onWindowScroll:function(){this.resetPosition()},onWindowHashChange:function(){a.location.hash!=="#"+(this.settings.jQueryMobile?this.settings.jQueryMobileDialogHash:this.currentHistoryHashValue)&&(this.backButtonClicked=!0,this.hide())},resetPosition:function(){this.removeZoomPanRotate(),this.viewport.resetPosition(),this.slider.resetPosition(),this.documentOverlay.resetPosition(),this.captionAndToolbar.resetPosition(),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onResetPosition)},canUserZoom:function(){return this.settings.allowUserZoom?this.isBusy?!1:b.isNothing(this.slider.currentItem.fullSizeImage)?!1:this.slider.currentItem.fullSizeImage.hasLoaded?!0:!1:!1},isZoomActive:function(){return!b.isNothing(this.zoomPanRotate)},onViewportTouch:function(a){switch(a.action){case f.Actions.gestureStart:this.canUserZoom()&&(this.stopSlideshow(),this.isZoomActive()||(this.zoomPanRotate=new k({maxZoom:this.settings.maxUserZoom,minZoom:this.settings.minUserZoom,adjustPanToZoom:this.settings.adjustUserPanToZoom},this.viewport.el,this.slider.currentItem.imageEl),b.DOM.resetTranslate(this.zoomPanRotate.containerEl),b.DOM.resetTranslate(this.zoomPanRotate.imageEl)),this.fadeOutCaptionAndToolbar());break;case f.Actions.gestureChange:this.isZoomActive()&&this.zoomPanRotate.zoomRotate(a.scale,this.settings.allowRotationOnUserZoom?a.rotation:0);break;case f.Actions.gestureEnd:this.isZoomActive()&&this.zoomPanRotate.setStartingScaleAndRotation(a.scale,this.settings.allowRotationOnUserZoom?a.rotation:0);break;case f.Actions.touchStart:this.stopSlideshow(),this.isZoomActive()&&this.zoomPanRotate.panStart(a.point);break;case f.Actions.touchMove:this.isZoomActive()&&this.zoomPanRotate.pan(a.point);break;case f.Actions.click:this.stopSlideshow(),this.settings.hideToolbar?this.hide():this.toggleCaptionAndToolbar(),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onViewportClick);break;case f.Actions.swipeLeft:this.stopSlideshow(),this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.swipe,this.showNext();break;case f.Actions.swipeRight:this.stopSlideshow(),this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.swipe,this.showPrevious()}},onViewportFadeOut:function(){this.viewport.removeEventListener(c.EventTypes.onFadeOut,this.viewportFadeOutEventHandler),this.isActive=this.isBusy=!1,this.dispatchEvent(Code.PhotoSwipe.EventTypes.onHide),this.goBackInHistory()},hide:function(){this.isBusy||this.settings.preventHide||!this.isActive||(this.isBusy=!0,this.removeZoomPanRotate(),this.removeEventListeners(),this.documentOverlay.hide(),this.captionAndToolbar.hide(),this.slider.hide(),b.DOM.removeClass(document.body,Code.PhotoSwipe.CssClasses.activeBody),this.viewport.addEventListener(c.EventTypes.onFadeOut,this.viewportFadeOutEventHandler),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeHide),this.viewport.fadeOut())},hideImmediately:function(){this.isActive&&(this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeHide),this.removeZoomPanRotate(),this.removeEventListeners(),this.documentOverlay.hide(),this.captionAndToolbar.hide(),this.slider.hide(),this.viewport.hide(),b.DOM.removeClass(document.body,Code.PhotoSwipe.CssClasses.activeBody),this.isActive=this.isBusy=!1,this.dispatchEvent(Code.PhotoSwipe.EventTypes.onHide),this.goBackInHistory())},goBackInHistory:function(){this.isBackEventSupported&&this.settings.backButtonHideEnabled&&(this.backButtonClicked||a.history.back())},showNext:function(){this.isBusy||(this.isBusy=!0,this.cleanUpZoomPanRotateForNextPrevious(),this.setCaptionAndToolbarOnShowPreviousNext(),this.slider.showNext(),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onShowNext))},showPrevious:function(){this.isBusy||(this.isBusy=!0,this.cleanUpZoomPanRotateForNextPrevious(),this.setCaptionAndToolbarOnShowPreviousNext(),this.wasUserZoomActive&&b.DOM.hide(this.slider.currentItem.imageEl),this.slider.showPrevious(),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onShowPrevious))},cleanUpZoomPanRotateForNextPrevious:function(){b.isNothing(this.zoomPanRotate)||(this.settings.loop?b.DOM.hide(this.slider.currentItem.imageEl):this.currentIndex>0&&this.currentIndex<this.fullSizeImages.length-2&&b.DOM.hide(this.slider.currentItem.imageEl)),this.removeZoomPanRotate()},setCaptionAndToolbarOnShowPreviousNext:function(){if(!this.settings.captionAndToolbarHide){var a=!1;switch(this.lastShowPrevTrigger){case Code.PhotoSwipe.ShowPrevTriggers.toolbar:a=!0;break;case Code.PhotoSwipe.ShowPrevTriggers.slideshow:a=!1;break;default:a=!this.settings.captionAndToolbarHideOnSwipe}a?this.captionAndToolbar.resetAutoHideTimeout():this.fadeOutCaptionAndToolbar()}},onSliderDisplayCurrentFullSizeImage:function(a){if(this.currentIndex=a.fullSizeImage.index,!this.settings.captionAndToolbarHide){switch(this.settings.loop?(this.captionAndToolbar.setNextState(!1),this.captionAndToolbar.setPreviousState(!1)):(this.currentIndex>=this.fullSizeImages.length-1?this.captionAndToolbar.setNextState(!0):this.captionAndToolbar.setNextState(!1),this.currentIndex<1?this.captionAndToolbar.setPreviousState(!0):this.captionAndToolbar.setPreviousState(!1)),this.captionAndToolbar.setCaptionValue(this.fullSizeImages[this.currentIndex].caption),a=!1,this.lastShowPrevTrigger){case Code.PhotoSwipe.ShowPrevTriggers.toolbar:a=!0;break;case Code.PhotoSwipe.ShowPrevTriggers.show:a=!0;break;case Code.PhotoSwipe.ShowPrevTriggers.slideshow:a=!1;break;default:a=!this.settings.captionAndToolbarHideOnSwipe}a&&(this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarShow),this.captionAndToolbar.fadeIn()),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onDisplayImage)}this.lastShowPrevTrigger="",this.setSliderPreviousAndNextFullSizeImages(),this.isSlideshowActive&&this.fireSlideshowTimeout(),this.isBusy=!1},toggleCaptionAndToolbar:function(){this.settings.captionAndToolbarHide?this.captionAndToolbar.hide():this.captionAndToolbar.isHidden?(this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarShow),this.captionAndToolbar.fadeIn()):(this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarHide),this.captionAndToolbar.fadeOut())},fadeOutCaptionAndToolbar:function(){!this.settings.captionAndToolbarHide&&!this.captionAndToolbar.isHidden&&(this.dispatchEvent(Code.PhotoSwipe.EventTypes.onBeforeCaptionAndToolbarHide),this.captionAndToolbar.fadeOut())},onToolbarClick:function(a){switch(this.stopSlideshow(),a.action){case i.Actions.previous:this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.toolbar,this.showPrevious();break;case i.Actions.next:this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.toolbar,this.showNext();break;case i.Actions.play:this.startSlideshow();break;default:this.hide()}},startSlideshow:function(){this.isBusy||(b.isNothing(this.slideshowTimeout)||a.clearTimeout(this.slideshowTimeout),this.removeZoomPanRotate(),this.isSlideshowActive=!0,this.fadeOutCaptionAndToolbar(),this.fireSlideshowTimeout(),this.dispatchEvent(Code.PhotoSwipe.EventTypes.onSlideshowStart))},stopSlideshow:function(){b.isNothing(this.slideshowTimeout)||a.clearTimeout(this.slideshowTimeout),this.isSlideshowActive=!1,this.dispatchEvent(Code.PhotoSwipe.EventTypes.onSlideshowStop)},fireSlideshowTimeout:function(){var b=!1;this.settings.loop?this.fullSizeImages.length>1&&(b=!0):this.currentIndex<this.fullSizeImages.length-1&&(b=!0),b&&(this.lastShowPrevTrigger=Code.PhotoSwipe.ShowPrevTriggers.slideshow,this.slideshowTimeout=a.setTimeout(this.showNext.bind(this),this.settings.slideshowDelay))},removeZoomPanRotate:function(){b.isNothing(this.zoomPanRotate)||(this.zoomPanRotate.removeFromDOM(),this.zoomPanRotate=null)}}),Code.PhotoSwipe.CssClasses={activeBody:"ps-active"},Code.PhotoSwipe.ShowPrevTriggers={show:"show",toolbar:"toobar",swipe:"swipe",keyboard:"keyboard",slideshow:"slideshow"},Code.PhotoSwipe.EventTypes={onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onShowNext:"onShowNext",onShowPrevious:"onShowPrevious",onDisplayImage:"onDisplayImage",onResetPosition:"onResetPosition",onSlideshowStart:"onSlideshowStart",onSlideshowStop:"onSlideshowStop",onBeforeCaptionAndToolbarShow:"onBeforeCaptionAndToolbarShow",onBeforeCaptionAndToolbarHide:"onBeforeCaptionAndToolbarHide",onViewportClick:"onViewportClick"},Code.PhotoSwipe.GetImageSource=function(a){return a.href},Code.PhotoSwipe.GetImageCaption=function(a){if("IMG"===a.nodeName)return b.DOM.getAttribute(a,"alt");var c,d;for(c=0;c<a.childNodes.length;c++)if(d=a.childNodes[c],"IMG"===a.childNodes[c].nodeName)return b.DOM.getAttribute(d,"alt")},Code.PhotoSwipe.GetImageMetaData=function(){return{}},Code.PhotoSwipe.Current=new h,Code.photoSwipe=function(a,c,d){var e=!0;if(!b.isNothing(a)){if(b.isNothing(c)&&(c=document.documentElement,e=!1),b.isString(c)&&(c=document.documentElement.querySelector(c)),b.isNothing(c))throw"Unable to find container element";if(b.isString(a)&&(a=c.querySelectorAll(a)),!b.isNothing(a)){var f=function(a){a.preventDefault(),g(a.currentTarget)},g=function(b){var c;for(c=0;c<a.length&&a[c]!==b;c++);Code.PhotoSwipe.Current.show(c)};if(Code.PhotoSwipe.Current.setOptions(d),Code.PhotoSwipe.Current.setImages(a),e)c.addEventListener("click",function(c){if(c.target!==c.currentTarget){c.preventDefault();var d=function(a,c,e){return b.isNothing(a)||b.isNothing(c)||b.isNothing(e)?null:a.nodeName===c?a:a===e?null:d(a.parentNode,c,e)},c=d(c.target,a[0].nodeName,c.currentTarget);b.isNothing(c)||g(c)}},!1);else for(c=0;c<a.length;c++)a[c].addEventListener("click",f,!1);return a}}},b.isNothing(a.jQuery)||(a.jQuery.fn.photoSwipe=function(a){var b=this;Code.PhotoSwipe.Current.setOptions(a),Code.PhotoSwipe.Current.setImages(b),$(b).live("click",function(a){a.preventDefault(),a=$(b).index($(a.currentTarget)),Code.PhotoSwipe.Current.show(a)})})}(window,Code.PhotoSwipe.Util,Code.PhotoSwipe.ElementClass,Code.PhotoSwipe.DocumentOverlayClass,Code.PhotoSwipe.FullSizeImageClass,Code.PhotoSwipe.ViewportClass,Code.PhotoSwipe.SliderClass,Code.PhotoSwipe.CaptionClass,Code.PhotoSwipe.ToolbarClass,Code.PhotoSwipe.CaptionToolbarClass,Code.PhotoSwipe.ZoomPanRotateClass);