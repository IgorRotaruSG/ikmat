/** @license
jSignature v2 SVG export plugin.

*/
/**
Copyright (c) 2012 Willow Systems Corp http://willow-systems.com
MIT License <http://www.opensource.org/licenses/mit-license.php>
*/

!function(){"use strict";function t(t,n){this.x=t,this.y=n,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var e=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*e(this.y);else if(0===this.y)this._length=t,this.x=t*e(this.x);else{var n=Math.abs(this.y/this.x),r=Math.sqrt(Math.pow(t,2)/(1+Math.pow(n,2))),i=n*r;this._length=t,this.x=r*e(this.x),this.y=i*e(this.y)}return this},this.angleTo=function(t){var n=this.getLength()*t.getLength();return 0===n?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/n,-1),1))/Math.PI}}function n(n,e){this.x=n,this.y=e,this.getVectorToCoordinates=function(n,e){return new t(n-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,n){return this.getVectorToCoordinates(t,n).reverse()},this.getVectorToPoint=function(n){return new t(n.x-this.x,n.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function e(t,n){var e=Math.pow(10,n);return Math.round(t*e)/e}function r(r,i,o){i+=1;var h,s=new n(r.x[i-1],r.y[i-1]),a=new n(r.x[i],r.y[i]),u=s.getVectorToPoint(a),x=new n(r.x[i-2],r.y[i-2]),y=x.getVectorToPoint(s),g=2;if(y.getLength()>o){h=i>2?new n(r.x[i-3],r.y[i-3]).getVectorToPoint(x):new t(0,0);var l=.05,c=.35*y.getLength(),f=y.angleTo(h.reverse()),p=u.angleTo(y.reverse()),v=new t(h.x+y.x,h.y+y.y).resizeTo(Math.max(l,f)*c),w=new t(y.x+u.x,y.y+u.y).reverse().resizeTo(Math.max(l,p)*c),d=new t(y.x+w.x,y.y+w.y);return["c",e(v.x,g),e(v.y,g),e(d.x,g),e(d.y,g),e(y.x,g),e(y.y,g)]}return["l",e(y.x,g),e(y.y,g)]}function i(r,i){var o=r.x.length-1,h=new n(r.x[o],r.y[o]),s=new n(r.x[o-1],r.y[o-1]),a=s.getVectorToPoint(h),u=2;if(o>1&&a.getLength()>i){var x=new n(r.x[o-2],r.y[o-2]).getVectorToPoint(s),y=a.angleTo(x.reverse()),g=.05,l=.35*a.getLength(),c=new t(x.x+a.x,x.y+a.y).resizeTo(Math.max(g,y)*l);return["c",e(c.x,u),e(c.y,u),e(a.x,u),e(a.y,u),e(a.x,u),e(a.y,u)]}return["l",e(a.x,u),e(a.y,u)]}function o(t,n,o){for(var h=["M",e(t.x[0]-n,2),e(t.y[0]-o,2)],s=1,a=t.x.length-1,u=1;a>s;s++)h.push.apply(h,r(t,s,u));return a>0?h.push.apply(h,i(t,s,u)):0===a&&h.push.apply(h,["l",1,1]),h.join(" ")}function h(t){var n,e,r=[],i={x:[],y:[]};for(n=0,e=t.x.length;e>n;n++)r.push({x:t.x[n],y:t.y[n]});for(r=simplify(r,.7,!0),n=0,e=r.length;e>n;n++)i.x.push(r[n].x),i.y.push(r[n].y);return i}function s(t){var n,e,r,i,s,a,u=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],x=t.length,y=[],g=[],l=0,c=0,f=0,p=0,v=1,w=[];if(0!==x){for(n=0;x>n;n++)e=h(t[n]),w.push(e),y=y.concat(e.x),g=g.concat(e.y);r=Math.min.apply(null,y)-v,i=Math.max.apply(null,y)+v,s=Math.min.apply(null,g)-v,a=Math.max.apply(null,g)+v,f=0>r?0:r,p=0>s?0:s,l=i-r,c=a-s}for(u.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+l.toString()+'" height="'+c.toString()+'">'),n=0,x=w.length;x>n;n++)e=w[n],u.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+o(e,f,p)+'"/>');return u.push("</svg>"),u.join("")}function a(t){return[g,s(t)]}function u(t){return[l,y(s(t))]}function x(t){var n=t.fn.jSignature;n("addPlugin","export","svg",a),n("addPlugin","export",g,a),n("addPlugin","export","svgbase64",u),n("addPlugin","export",l,u)}if(function(t,n){function e(t,n){var e=t.x-n.x,r=t.y-n.y;return e*e+r*r}function r(t,n,e){var r,i=n.x,o=n.y,h=e.x-i,s=e.y-o;return(0!==h||0!==s)&&(r=((t.x-i)*h+(t.y-o)*s)/(h*h+s*s),r>1?(i=e.x,o=e.y):r>0&&(i+=h*r,o+=s*r)),h=t.x-i,s=t.y-o,h*h+s*s}function i(t,n){var r,i,o=t.length,h=t[0],s=[h];for(r=1;o>r;r++)i=t[r],e(i,h)>n&&(s.push(i),h=i);return h!==i&&s.push(i),s}function o(t,e){var i,o,h,s,a=t.length,u=typeof Uint8Array!=n+""?Uint8Array:Array,x=new u(a),y=0,g=a-1,l=[],c=[],f=[];for(x[y]=x[g]=1;g;){for(o=0,i=y+1;g>i;i++)h=r(t[i],t[y],t[g]),h>o&&(s=i,o=h);o>e&&(x[s]=1,l.push(y),c.push(s),l.push(s),c.push(g)),y=l.pop(),g=c.pop()}for(i=0;a>i;i++)x[i]&&f.push(t[i]);return f}var h=typeof exports!=n+""?exports:t;h.simplify=function(t,e,r){var h=e!==n?e*e:1;return r||(t=i(t,h)),t=o(t,h)}}(window),"function"!=typeof y)var y=function(t){var n,e,r,i,o,h,s,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x=u.split(""),y=0,g=0,l="",c=[];do n=t.charCodeAt(y++),e=t.charCodeAt(y++),r=t.charCodeAt(y++),a=n<<16|e<<8|r,i=a>>18&63,o=a>>12&63,h=a>>6&63,s=63&a,c[g++]=x[i]+x[o]+x[h]+x[s];while(y<t.length);l=c.join("");var f=t.length%3;return(f?l.slice(0,f-3):l)+"===".slice(f||3)};var g="image/svg+xml",l="image/svg+xml;base64";if("undefined"==typeof $)throw new Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");x($)}();