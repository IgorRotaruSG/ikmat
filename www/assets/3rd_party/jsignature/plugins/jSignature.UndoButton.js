!function(){function a(a,b,c){var d=a.call(this);!function(a,b,c){a.events.subscribe(c+".change",function(){a.dataEngine.data.length?b.show():b.hide()})}(this,d,b),function(a,b,c){var d=c+".undo";b.bind("click",function(){a.events.publish(d)}),a.events.subscribe(d,function(){var b=a.dataEngine.data;b.length&&(b.pop(),a.resetCanvas(b))})}(this,d,this.events.topics.hasOwnProperty(b+".undo")?c:b)}function b(b){var c="jSignature";this.events.subscribe(c+".attachingEventHandlers",function(){if(this.settings[b]){var d=this.settings[b];"function"!=typeof d&&(d=function(){var a="position:absolute;display:none;margin:0 !important;top:auto",b=$('<input type="button" value="Undo last stroke" style="'+a+'" />').appendTo(this.$controlbarLower),c=b.width();return b.css("left",Math.round((this.canvas.width-c)/2)),c!==b.width()&&b.width(c),b}),a.call(this,d,c,b)}})}var c="jSignature",d=function(){$.fn[c]("addPlugin","instance","UndoButton",b)};d()}();