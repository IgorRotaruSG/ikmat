function utf8_encode(a){if(null===a||"undefined"==typeof a)return"";var b,c,d=a+"",e="",f=0;b=c=0,f=d.length;for(var g=0;g<f;g++){var h=d.charCodeAt(g),i=null;if(h<128)c++;else if(h>127&&h<2048)i=String.fromCharCode(h>>6|192,63&h|128);else if(h&!0)i=String.fromCharCode(h>>12|224,h>>6&63|128,63&h|128);else{if(h&!0)throw new RangeError("Unmatched trail surrogate at "+g);var j=d.charCodeAt(++g);if(j&!0)throw new RangeError("Unmatched lead surrogate at "+(g-1));h=((1023&h)<<10)+(1023&j)+65536,i=String.fromCharCode(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}null!==i&&(c>b&&(e+=d.slice(b,c)),e+=i,b=c=g+1)}return c>b&&(e+=d.slice(b,f)),e}