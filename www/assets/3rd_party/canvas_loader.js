!function(a){var b,c=function(a,b){"undefined"==typeof b&&(b={}),this.init(a,b)},d=c.prototype,e=["canvas","vml"],f=["oval","spiral","square","rect","roundRect"],g=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,h=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1])?!0:!1,i=!!document.createElement("canvas").getContext,j=!0,k=function(a,b,c){var d,a=document.createElement(a);for(d in c)a[d]=c[d];return"undefined"!=typeof b&&b.appendChild(a),a},l=function(a,b){for(var c in b)a.style[c]=b[c];return a},m=function(a,b){for(var c in b)a.setAttribute(c,b[c]);return a},n=function(a,b,c,d){a.save(),a.translate(b,c),a.rotate(d),a.translate(-b,-c),a.beginPath()};d.init=function(a,d){"boolean"==typeof d.safeVML&&(j=d.safeVML);try{this.mum=void 0!==document.getElementById(a)?document.getElementById(a):document.body}catch(f){this.mum=document.body}if(d.id="undefined"!=typeof d.id?d.id:"canvasLoader",this.cont=k("div",this.mum,{id:d.id}),i)b=e[0],this.can=k("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=l(k("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(b=e[1],"undefined"==typeof c.vmlSheet){document.getElementsByTagName("head")[0].appendChild(k("style")),c.vmlSheet=document.styleSheets[document.styleSheets.length-1];var g,h=["group","oval","roundrect","fill"];for(g in h)c.vmlSheet.addRule(h[g],"behavior:url(#default#VML); position:absolute;")}this.vml=k("group",this.cont)}this.setColor(this.color),this.draw(),l(this.cont,{display:"none"})},d.cont={},d.can={},d.con={},d.cCan={},d.cCon={},d.timer={},d.activeId=0,d.diameter=40,d.setDiameter=function(a){this.diameter=Math.round(Math.abs(a)),this.redraw()},d.getDiameter=function(){return this.diameter},d.cRGB={},d.color="#000000",d.setColor=function(a){this.color=g.test(a)?a:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},d.getColor=function(){return this.color},d.shape=f[0],d.setShape=function(a){for(var b in f)if(a===f[b]){this.shape=a,this.redraw();break}},d.getShape=function(){return this.shape},d.density=40,d.setDensity=function(a){this.density=j&&b===e[1]?Math.round(Math.abs(a))<=40?Math.round(Math.abs(a)):40:Math.round(Math.abs(a)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},d.getDensity=function(){return this.density},d.range=1.3,d.setRange=function(a){this.range=Math.abs(a),this.redraw()},d.getRange=function(){return this.range},d.speed=2,d.setSpeed=function(a){this.speed=Math.round(Math.abs(a))},d.getSpeed=function(){return this.speed},d.fps=24,d.setFPS=function(a){this.fps=Math.round(Math.abs(a)),this.reset()},d.getFPS=function(){return this.fps},d.getRGB=function(a){return a="#"===a.charAt(0)?a.substring(1,7):a,{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}},d.draw=function(){var a,c,d,g,i,j,o,p,q,r=0,s=this.density,t=Math.round(s*this.range),u=0;q=this.cCon;var v=this.diameter;if(b===e[0])for(q.clearRect(0,0,1e3,1e3),m(this.can,{width:v,height:v}),m(this.cCan,{width:v,height:v});s>r;){switch(p=t>=r?1-1/t*r:p=0,j=270-360/s*r,o=j/180*Math.PI,q.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+p.toString()+")",this.shape){case f[0]:case f[1]:a=.07*v,g=.47*v+Math.cos(o)*(.47*v-a)-.47*v,i=.47*v+Math.sin(o)*(.47*v-a)-.47*v,q.beginPath(),this.shape===f[1]?q.arc(.5*v+g,.5*v+i,a*p,0,2*Math.PI,!1):q.arc(.5*v+g,.5*v+i,a,0,2*Math.PI,!1);break;case f[2]:a=.12*v,g=Math.cos(o)*(.47*v-a)+.5*v,i=Math.sin(o)*(.47*v-a)+.5*v,n(q,g,i,o),q.fillRect(g,i-.5*a,a,a);break;case f[3]:case f[4]:c=.3*v,d=.27*c,g=Math.cos(o)*(d+.13*(v-d))+.5*v,i=Math.sin(o)*(d+.13*(v-d))+.5*v,n(q,g,i,o),this.shape===f[3]?q.fillRect(g,i-.5*d,c,d):(a=.55*d,q.moveTo(g+a,i-.5*d),q.lineTo(g+c-a,i-.5*d),q.quadraticCurveTo(g+c,i-.5*d,g+c,i-.5*d+a),q.lineTo(g+c,i-.5*d+d-a),q.quadraticCurveTo(g+c,i-.5*d+d,g+c-a,i-.5*d+d),q.lineTo(g+a,i-.5*d+d),q.quadraticCurveTo(g,i-.5*d+d,g,i-.5*d+d-a),q.lineTo(g,i-.5*d+a),q.quadraticCurveTo(g,i-.5*d,g+a,i-.5*d))}q.closePath(),q.fill(),q.restore(),++r}else{switch(l(this.cont,{width:v,height:v}),l(this.vml,{width:v,height:v}),this.shape){case f[0]:case f[1]:o="oval",a=140;break;case f[2]:o="roundrect",a=120;break;case f[3]:case f[4]:o="roundrect",a=300}for(c=d=a,g=500-d,i=.5*-d;s>r;){switch(p=t>=r?1-1/t*r:p=0,j=270-360/s*r,this.shape){case f[1]:c=d=a*p,g=500-.5*a-a*p*.5,i=.5*(a-a*p);break;case f[0]:case f[2]:h&&(i=0,this.shape===f[2]&&(g=500-.5*d));break;case f[3]:case f[4]:c=.95*a,d=.28*c,h?(g=0,i=500-.5*d):(g=500-c,i=.5*-d),u=this.shape===f[4]?.6:0}q=m(l(k("group",this.vml),{width:1e3,height:1e3,rotation:j}),{coordsize:"1000,1000",coordorigin:"-500,-500"}),q=l(k(o,q,{stroked:!1,arcSize:u}),{width:c,height:d,top:i,left:g}),k("fill",q,{color:this.color,opacity:p}),++r}}this.tick(!0)},d.clean=function(){if(b===e[0])this.con.clearRect(0,0,1e3,1e3);else{var a=this.vml;if(a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)}},d.redraw=function(){this.clean(),this.draw()},d.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},d.tick=function(a){var c=this.con,d=this.diameter;a||(this.activeId+=360/this.density*this.speed),b===e[0]?(c.clearRect(0,0,d,d),n(c,.5*d,.5*d,this.activeId/180*Math.PI),c.drawImage(this.cCan,0,0,d,d),c.restore()):(this.activeId>=360&&(this.activeId-=360),l(this.vml,{rotation:this.activeId}))},d.show=function(){if("number"!=typeof this.timer){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1e3/this.fps)),l(this.cont,{display:"block"})}},d.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,l(this.cont,{display:"none"}))},d.kill=function(){var a=this.cont;"number"==typeof this.timer&&this.hide(),b===e[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);for(var c in this)delete this[c]},a.CanvasLoader=c}(window);